{
  "id": "ranking_rodada",
  "nome": "Ranking da Rodada (BANCO)",
  "descricao": "Classificação por rodada com impacto financeiro baseado na posição. Conhecida como sistema BANCO - bônus para primeiros, ônus para últimos.",
  "tipo": "ranking_rodada",
  "status": "ativo",
  "versao": "1.0.0",

  "configuracao": {
    "ligas_habilitadas": ["684cb1c8af923da7c7df51de", "684d821cf1a7ae16d1f89572"],
    "modulo_ativo": true,
    "temporada": 2025
  },

  "regras": {
    "calculo": {
      "metodo": "ordenacao_por_pontos_rodada",
      "fonte_dados": "collection:rodadas",
      "campo_pontuacao": "pontos"
    },

    "ordenacao": {
      "criterio_principal": "pontos",
      "direcao": "DESC"
    },

    "tabela_financeira": {
      "super_cartola": {
        "liga_id": "684cb1c8af923da7c7df51de",
        "total_times": 32,
        "zonas": {
          "ganho": {
            "descricao": "Posições 1-11 (G1-G11)",
            "valores": {
              "1": { "valor": 20.00, "zona": "G1", "titulo": "MITO" },
              "2": { "valor": 19.00, "zona": "G2" },
              "3": { "valor": 18.00, "zona": "G3" },
              "4": { "valor": 17.00, "zona": "G4" },
              "5": { "valor": 16.00, "zona": "G5" },
              "6": { "valor": 15.00, "zona": "G6" },
              "7": { "valor": 14.00, "zona": "G7" },
              "8": { "valor": 13.00, "zona": "G8" },
              "9": { "valor": 12.00, "zona": "G9" },
              "10": { "valor": 11.00, "zona": "G10" },
              "11": { "valor": 10.00, "zona": "G11" }
            }
          },
          "neutra": {
            "descricao": "Posições 12-21",
            "posicoes": [12, 13, 14, 15, 16, 17, 18, 19, 20, 21],
            "valor": 0
          },
          "perda": {
            "descricao": "Posições 22-32 (Z1-Z10)",
            "valores": {
              "22": { "valor": -10.00, "zona": "Z1" },
              "23": { "valor": -11.00, "zona": "Z2" },
              "24": { "valor": -12.00, "zona": "Z3" },
              "25": { "valor": -13.00, "zona": "Z4" },
              "26": { "valor": -14.00, "zona": "Z5" },
              "27": { "valor": -15.00, "zona": "Z6" },
              "28": { "valor": -16.00, "zona": "Z7" },
              "29": { "valor": -17.00, "zona": "Z8" },
              "30": { "valor": -18.00, "zona": "Z9" },
              "31": { "valor": -19.00, "zona": "Z10" },
              "32": { "valor": -20.00, "zona": "Z11", "titulo": "MICO" }
            }
          }
        }
      },

      "cartoleiros_sobral": {
        "liga_id": "684d821cf1a7ae16d1f89572",
        "fases": {
          "fase_1": {
            "descricao": "Rodadas 1-28 (6 times ativos)",
            "rodada_inicio": 1,
            "rodada_fim": 28,
            "total_times": 6,
            "valores": {
              "1": { "valor": 7.00 },
              "2": { "valor": 4.00 },
              "3": { "valor": 0.00 },
              "4": { "valor": -2.00 },
              "5": { "valor": -5.00 },
              "6": { "valor": -10.00 }
            }
          },
          "fase_2": {
            "descricao": "Rodadas 29-38 (4 times ativos)",
            "rodada_inicio": 29,
            "rodada_fim": 38,
            "total_times": 4,
            "valores": {
              "1": { "valor": 5.00 },
              "2": { "valor": 0.00 },
              "3": { "valor": 0.00 },
              "4": { "valor": -5.00 }
            }
          }
        }
      }
    },

    "desempate": {
      "criterios": [
        "posicao_ranking_geral"
      ]
    }
  },

  "financeiro": {
    "impacto_banco": true,
    "tipo_transacao": ["BONUS", "ONUS"],
    "moeda": "BRL",
    "precisao_decimal": 2
  },

  "wizard": {
    "titulo": "Configurar Ranking da Rodada (BANCO)",
    "descricao": "Defina os valores financeiros por posição no ranking de cada rodada. Valores positivos para ganhos, negativos para perdas.",
    "perguntas": [
      {
        "id": "tipo_config",
        "tipo": "select",
        "label": "Tipo de configuração",
        "descricao": "Escolha se terá valores fixos ou por fases (ex: Sobral tem fases diferentes)",
        "default": "fixo",
        "required": true,
        "options": [
          {
            "valor": "fixo",
            "label": "Valores Fixos (todas as rodadas iguais)"
          },
          {
            "valor": "temporal",
            "label": "Por Fases (rodadas diferentes têm valores diferentes)"
          }
        ],
        "afeta": "configuracao.temporal"
      },
      {
        "id": "total_participantes",
        "tipo": "number",
        "label": "Total de participantes ativos",
        "descricao": "Quantos times participam desta liga? Isso define quantos valores você precisa preencher.",
        "default": 10,
        "min": 4,
        "max": 50,
        "required": true,
        "afeta": "configuracao.total_participantes"
      },
      {
        "id": "valores_manual",
        "tipo": "valores_grid",
        "label": "Valores financeiros por posição",
        "descricao": "Defina o valor (em R$) para cada posição no ranking. Use valores positivos para ganhos e negativos para perdas. Zero para posições neutras.",
        "required": true,
        "dependeDe": "total_participantes",
        "renderiza": "grid_dinamico",
        "afeta": "financeiro_override.valores_por_posicao",
        "preview": true
      },
      {
        "id": "rodada_transicao",
        "tipo": "number",
        "label": "Rodada de transição entre fases",
        "descricao": "A partir de qual rodada os valores mudam? (apenas para tipo temporal). Ex: Sobral muda na rodada 29.",
        "default": 30,
        "min": 1,
        "max": 38,
        "dependeDe": "tipo_config",
        "condicao": "temporal",
        "afeta": "configuracao.rodada_transicao"
      }
    ]
  },

  "metadados": {
    "criado_em": "2025-12-14",
    "autor": "Sistema",
    "fonte": "controllers/fluxoFinanceiroController.js:getBancoPorRodada"
  }
}
