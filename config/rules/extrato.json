{
  "id": "extrato",
  "nome": "Extrato Financeiro",
  "descricao": "Controle de mensalidades, pagamentos, acertos e saldo financeiro dos participantes.",
  "tipo": "financeiro",
  "status": "ativo",
  "versao": "2.0.0",
  "configuracao": {
    "modulo_ativo": true,
    "temporada": 2026
  },
  "regras": {
    "calculo": {
      "metodo": "soma_componentes",
      "componentes": [
        "banco_rodadas",
        "top10_mitos_micos",
        "melhor_mes",
        "pontos_corridos",
        "mata_mata",
        "artilheiro_luva_ouro",
        "acertos_manuais",
        "campos_editaveis",
        "ajustes_financeiros"
      ],
      "nota": "ajustes_financeiros = AjusteFinanceiro (sistema dinâmico 2026+, substitui campos_editaveis para novas temporadas)"
    },
    "moeda": "BRL",
    "precisao_decimal": 2,
    "exibir_historico": true,
    "permitir_exportacao": true
  },
  "campos_editaveis": {
    "_nota": "LEGADO (temporadas <= 2025): 4 campos fixos via FluxoFinanceiroCampos. Para 2026+, usar ajustes_financeiros (AjusteFinanceiro) com campos dinâmicos ilimitados.",
    "campo1": {
      "label": "Campo Livre 1",
      "descricao": "Campo editável customizável",
      "tipo": "currency",
      "default": 0
    },
    "campo2": {
      "label": "Campo Livre 2",
      "descricao": "Campo editável customizável",
      "tipo": "currency",
      "default": 0
    },
    "campo3": {
      "label": "Campo Livre 3",
      "descricao": "Campo editável customizável",
      "tipo": "currency",
      "default": 0
    },
    "campo4": {
      "label": "Campo Livre 4",
      "descricao": "Campo editável customizável",
      "tipo": "currency",
      "default": 0
    }
  },
  "ajustes_financeiros": {
    "descricao": "Sistema dinâmico de ajustes (2026+). Quantidade ilimitada por participante, com auditoria completa.",
    "modelo": "AjusteFinanceiro",
    "collection": "ajustesfinanceiros",
    "tipo_valor": "currency",
    "permite_positivo": true,
    "permite_negativo": true
  },
  "financeiro": {
    "impacto_direto": false,
    "descricao": "Módulo agregador, não gera transações próprias"
  },
  "wizard": {
    "titulo": "Configurar Extrato Financeiro",
    "descricao": "Defina as configurações de exibição do extrato e o comportamento dos ajustes financeiros.",
    "perguntas": [
      {
        "id": "exibir_historico_completo",
        "tipo": "boolean",
        "label": "Exibir histórico completo por rodada?",
        "descricao": "Se ativado, mostra tabela detalhada rodada por rodada. Se desativado, mostra apenas saldo consolidado.",
        "default": true,
        "required": true,
        "afeta": "regras_override.exibir_historico"
      },
      {
        "id": "permitir_exportacao_pdf",
        "tipo": "boolean",
        "label": "Permitir exportação em PDF?",
        "descricao": "Habilita botão de download do extrato em formato PDF para os participantes.",
        "default": true,
        "required": true,
        "afeta": "regras_override.permitir_exportacao"
      },
      {
        "id": "cor_saldo_positivo",
        "tipo": "select",
        "label": "Cor do saldo positivo",
        "descricao": "Escolha a cor para exibir saldos positivos (crédito)",
        "default": "verde",
        "required": true,
        "options": [
          {
            "valor": "verde",
            "label": "Verde (#10b981)"
          },
          {
            "valor": "azul",
            "label": "Azul (#3b82f6)"
          },
          {
            "valor": "laranja",
            "label": "Laranja (#f97316)"
          }
        ],
        "afeta": "ui_override.cor_saldo_positivo"
      },
      {
        "id": "cor_saldo_negativo",
        "tipo": "select",
        "label": "Cor do saldo negativo",
        "descricao": "Escolha a cor para exibir saldos negativos (débito)",
        "default": "vermelho",
        "required": true,
        "options": [
          {
            "valor": "vermelho",
            "label": "Vermelho (#ef4444)"
          },
          {
            "valor": "laranja_escuro",
            "label": "Laranja Escuro (#ea580c)"
          },
          {
            "valor": "rosa",
            "label": "Rosa (#ec4899)"
          }
        ],
        "afeta": "ui_override.cor_saldo_negativo"
      }
    ]
  },
  "ui": {
    "cores": {
      "credito": "#10b981",
      "neutro": "#6b7280",
      "debito": "#ef4444"
    },
    "icones": {
      "principal": "account_balance_wallet",
      "positivo": "trending_up",
      "negativo": "trending_down",
      "neutro": "remove"
    }
  },
  "metadados": {
    "criado_em": "2026-01-28",
    "autor": "Sistema",
    "fonte": "controllers/extratoFinanceiroCacheController.js"
  }
}
