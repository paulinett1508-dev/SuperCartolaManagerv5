{
  "id": "pontos_corridos",
  "nome": "Pontos Corridos",
  "descricao": "Sistema de confrontos 1x1 em formato de liga, onde cada time enfrenta todos os outros ao longo da temporada.",
  "tipo": "competicao_confronto",
  "status": "ativo",
  "versao": "2.1.0",

  "configuracao": {
    "ligas_habilitadas": ["684cb1c8af923da7c7df51de"],
    "modulo_ativo": true,
    "temporada": 2025,
    "rodada_inicial": 7,
    "formato": "round_robin"
  },

  "regras": {
    "confrontos": {
      "metodo": "round_robin_ordenado",
      "ordenacao_inicial": "nome_cartola_alfabetico",
      "calculo_oponente": {
        "formula": "(meuIndex + rodadaLiga) % totalTimes",
        "descricao": "Cada rodada, o índice do oponente avança ciclicamente"
      }
    },

    "resultado": {
      "criterio_comparacao": "pontuacao_rodada",
      "tolerancia_empate": 0.3,
      "limite_goleada": 50.0
    },

    "pontuacao_tabela": {
      "vitoria": {
        "pontos": 3,
        "financeiro": 5.00
      },
      "empate": {
        "pontos": 1,
        "financeiro": 3.00,
        "criterio": "diferenca_absoluta <= 0.3"
      },
      "derrota": {
        "pontos": 0,
        "financeiro": -5.00
      },
      "goleada": {
        "bonus_pontos": 0,
        "bonus_financeiro": 2.00,
        "criterio": "diferenca_absoluta >= 50",
        "descricao": "Vitória por 50+ pontos = goleada (+R$2 extra)"
      }
    },

    "classificacao": {
      "ordenacao": [
        { "campo": "pontos", "direcao": "DESC" },
        { "campo": "saldo_gols", "direcao": "DESC" },
        { "campo": "vitorias", "direcao": "DESC" }
      ],
      "campos_calculados": [
        "jogos",
        "vitorias",
        "empates",
        "derrotas",
        "pontos",
        "gols_pro",
        "gols_contra",
        "saldo_gols",
        "pontosGoleada",
        "financeiro"
      ]
    },

    "participantes_inativos": {
      "incluir_confrontos": true,
      "pontuacao_wo": 0,
      "descricao": "Times inativos aparecem separados no fim da classificação"
    },

    "cache": {
      "collection": "pontoscorridoscaches",
      "ttl_minutos": 60,
      "dados_armazenados": ["classificacao", "confrontos"]
    }
  },

  "financeiro": {
    "impacto_banco": true,
    "tipo_transacao": "PONTOS_CORRIDOS",
    "valores": {
      "vitoria_simples": 5.00,
      "vitoria_goleada": 7.00,
      "empate": 3.00,
      "derrota_simples": -5.00,
      "derrota_goleada": -7.00
    },
    "moeda": "BRL",
    "precisao_decimal": 2
  },

  "wizard": {
    "titulo": "Configurar Pontos Corridos",
    "descricao": "Defina valores de vitoria/empate/derrota e regras de goleada",
    "perguntas": [
      {
        "id": "rodada_inicial",
        "tipo": "number",
        "label": "Rodada inicial",
        "descricao": "A partir de qual rodada comecam os confrontos",
        "default": 7,
        "min": 1,
        "max": 38,
        "step": 1,
        "required": true,
        "afeta": "configuracao.rodada_inicial"
      },
      {
        "id": "valor_vitoria",
        "tipo": "number",
        "label": "Valor por vitoria (R$)",
        "descricao": "Premio por vencer um confronto",
        "default": 5,
        "min": 0,
        "max": 50,
        "step": 0.5,
        "required": true,
        "afeta": "financeiro_override.valores_simples.vitoria"
      },
      {
        "id": "valor_empate",
        "tipo": "number",
        "label": "Valor por empate (R$)",
        "descricao": "Valor recebido em caso de empate",
        "default": 3,
        "min": 0,
        "max": 50,
        "step": 0.5,
        "required": true,
        "afeta": "financeiro_override.valores_simples.empate"
      },
      {
        "id": "valor_derrota",
        "tipo": "number",
        "label": "Valor por derrota (R$)",
        "descricao": "Penalidade por perder (valor negativo)",
        "default": -5,
        "min": -50,
        "max": 0,
        "step": 0.5,
        "required": true,
        "afeta": "financeiro_override.valores_simples.derrota"
      },
      {
        "id": "tolerancia_empate",
        "tipo": "number",
        "label": "Tolerancia para empate (pts)",
        "descricao": "Diferenca maxima de pontos para considerar empate",
        "default": 0.3,
        "min": 0,
        "max": 5,
        "step": 0.1,
        "required": true,
        "afeta": "regras.resultado.tolerancia_empate"
      },
      {
        "id": "bonus_goleada",
        "tipo": "number",
        "label": "Bonus por goleada (R$)",
        "descricao": "Valor extra ao vencer por 50+ pontos",
        "default": 2,
        "min": 0,
        "max": 20,
        "step": 0.5,
        "required": false,
        "afeta": "regras_override.bonus_goleada"
      }
    ]
  },

  "metadados": {
    "criado_em": "2025-12-14",
    "autor": "Sistema",
    "fonte": "controllers/pontosCorridosCacheController.js"
  }
}
