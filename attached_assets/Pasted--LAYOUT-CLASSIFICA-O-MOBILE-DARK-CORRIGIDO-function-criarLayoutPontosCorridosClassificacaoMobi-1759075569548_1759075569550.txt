// LAYOUT CLASSIFICA√á√ÉO MOBILE DARK - CORRIGIDO
function criarLayoutPontosCorridosClassificacaoMobile(
  times,
  rodadaLiga,
  rodadaCartola,
) {
  const totalTimes = times.length;
  const lider = times.length > 0 ? times[0] : null;

  return `
  <!-- CARD COMPACTO DE DESTAQUE - L√çDER (60PX) -->
  <div style="
    background: ${MOBILE_DARK_HD_CONFIG.colors.gradientSuccess};
    border-radius: 8px;
    padding: 8px;
    margin-bottom: 16px;
    text-align: center;
    max-height: 60px;
    min-height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: ${MOBILE_DARK_HD_CONFIG.colors.shadowLight};
  ">
    ${lider ? `
      <div style="display: flex; align-items: center; gap: 12px;">
        ${lider.clube_id ? `
          <img src="/escudos/${lider.clube_id}.png"
               style="width: 28px; height: 28px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.3);"
               onerror="this.style.display='none'"
               alt="Escudo">
        ` : ""}

        <div>
          <div style="font: ${MOBILE_DARK_HD_CONFIG.fonts.weights.semibold} 13px Inter; color: white; margin-bottom: 1px;">
            ${lider.nome_cartola || lider.nome_cartoleiro || "N/D"}
          </div>
          <div style="font: ${MOBILE_DARK_HD_CONFIG.fonts.weights.bold} 16px Inter; color: white;">
            ${lider.pontos || 0} pts
          </div>
        </div>
      </div>
    ` : `
      <div style="font: ${MOBILE_DARK_HD_CONFIG.fonts.weights.regular} 14px Inter; color: rgba(255,255,255,0.8);">
        Nenhum dado dispon√≠vel
      </div>
    `}
  </div>

  <!-- TABELA CLASSIFICA√á√ÉO -->
  <div style="
    background: ${MOBILE_DARK_HD_CONFIG.colors.surface};
    border-radius: 16px;
    padding: 0;
    border: 1px solid ${MOBILE_DARK_HD_CONFIG.colors.border};
    box-shadow: ${MOBILE_DARK_HD_CONFIG.colors.shadowLight};
    overflow: hidden;
    margin-bottom: 20px;
  ">

    <!-- Header da tabela -->
    <div style="
      background: ${MOBILE_DARK_HD_CONFIG.colors.gradientDark};
      color: ${MOBILE_DARK_HD_CONFIG.colors.text};
      padding: 16px ${MOBILE_DARK_HD_CONFIG.padding}px;
      text-align: center;
    ">
      <h3 style="
        font: ${MOBILE_DARK_HD_CONFIG.fonts.weights.semibold} ${MOBILE_DARK_HD_CONFIG.fonts.subheading};
        margin: 0;
        letter-spacing: 0.5px;
      ">üèÜ CLASSIFICA√á√ÉO GERAL</h3>
    </div>

    <!-- Lista de classifica√ß√£o - TODOS OS TIMES -->
    <div style="padding: ${MOBILE_DARK_HD_CONFIG.padding}px 0;">
      ${times.map((time, index) => criarItemClassificacaoMobile(time, index)).join("")}
    </div>

  </div>

  <!-- ESTAT√çSTICAS RESUMO -->
  <div style="
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: ${MOBILE_DARK_HD_CONFIG.cardSpacing}px;
  ">

    <!-- Total Participantes -->
    <div style="
      background: ${MOBILE_DARK_HD_CONFIG.colors.surface};
      border: 1px solid ${MOBILE_DARK_HD_CONFIG.colors.border};
      border-radius: 12px;
      padding: 16px;
      text-align: center;
      box-shadow: ${MOBILE_DARK_HD_CONFIG.colors.shadowLight};
    ">
      <div style="
        font: ${MOBILE_DARK_HD_CONFIG.fonts.weights.regular} ${MOBILE_DARK_HD_CONFIG.fonts.caption};
        color: ${MOBILE_DARK_HD_CONFIG.colors.textMuted};
        margin-bottom: 4px;
        text-transform: uppercase;
        letter-spacing: 1px;
      ">üë• Times</div>

      <div style="
        font: ${MOBILE_DARK_HD_CONFIG.fonts.weights.bold} ${MOBILE_DARK_HD_CONFIG.fonts.heading};
        color: ${MOBILE_DARK_HD_CONFIG.colors.accent};
      ">${totalTimes}</div>
    </div>

    <!-- Rodada Atual -->
    <div style="
      background: ${MOBILE_DARK_HD_CONFIG.colors.surface};
      border: 1px solid ${MOBILE_DARK_HD_CONFIG.colors.border};
      border-radius: 12px;
      padding: 16px;
      text-align: center;
      box-shadow: ${MOBILE_DARK_HD_CONFIG.colors.shadowLight};
    ">
      <div style="
        font: ${MOBILE_DARK_HD_CONFIG.fonts.weights.regular} ${MOBILE_DARK_HD_CONFIG.fonts.caption};
        color: ${MOBILE_DARK_HD_CONFIG.colors.textMuted};
        margin-bottom: 4px;
        text-transform: uppercase;
        letter-spacing: 1px;
      ">üìÖ Rodada</div>

      <div style="
        font: ${MOBILE_DARK_HD_CONFIG.fonts.weights.bold} ${MOBILE_DARK_HD_CONFIG.fonts.heading};
        color: ${MOBILE_DARK_HD_CONFIG.colors.success};
      ">${rodadaLiga}¬™</div>
    </div>

  </div>
`;
}

// ITEM INDIVIDUAL DA CLASSIFICA√á√ÉO - SEGUINDO L√ìGICA DO PR√ìPRIO M√ìDULO
function criarItemClassificacaoMobile(time, index) {
  const posicao = index + 1;

  // L√≥gica espec√≠fica do m√≥dulo Pontos Corridos (sem G/Z)
  let posicaoDisplay, posicaoStyle, cardStyle = "";

  if (posicao === 1) {
    posicaoDisplay = "ü•á";
    posicaoStyle = `
      background: ${MOBILE_DARK_HD_CONFIG.colors.gold};
      color: #000;
      font-weight: ${MOBILE_DARK_HD_CONFIG.fonts.weights.extrabold};
    `;
    cardStyle = `border-left: 4px solid ${MOBILE_DARK_HD_CONFIG.colors.gold};`;
  } else if (posicao === 2) {
    posicaoDisplay = "ü•à";
    posicaoStyle = `
      background: ${MOBILE_DARK_HD_CONFIG.colors.silver};
      color: #000;
      font-weight: ${MOBILE_DARK_HD_CONFIG.fonts.weights.bold};
    `;
  } else if (posicao === 3) {
    posicaoDisplay = "ü•â";
    posicaoStyle = `
      background: ${MOBILE_DARK_HD_CONFIG.colors.bronze};
      color: #000;
      font-weight: ${MOBILE_DARK_HD_CONFIG.fonts.weights.bold};
    `;
  } else {
    posicaoDisplay = `${posicao}¬∫`;
    posicaoStyle = `
      background: ${MOBILE_DARK_HD_CONFIG.colors.surfaceLight};
      color: ${MOBILE_DARK_HD_CONFIG.colors.textSecondary};
      font-weight: ${MOBILE_DARK_HD_CONFIG.fonts.weights.semibold};
    `;
  }

  return `
  <div style="
    display: flex;
    align-items: center;
    padding: 16px ${MOBILE_DARK_HD_CONFIG.padding}px;
    border-bottom: 1px solid ${MOBILE_DARK_HD_CONFIG.colors.divider};
    ${cardStyle}
    transition: all 0.2s ease;
  ">

    <!-- Posi√ß√£o -->
    <div style="
      ${posicaoStyle}
      padding: 8px 12px;
      border-radius: 8px;
      margin-right: 16px;
      min-width: 50px;
      text-align: center;
      font: ${MOBILE_DARK_HD_CONFIG.fonts.weights.semibold} ${MOBILE_DARK_HD_CONFIG.fonts.bodySmall};
    ">
      ${posicaoDisplay}
    </div>

    <!-- Escudo -->
    <div style="margin-right: 12px; flex-shrink: 0;">
      ${time.clube_id ? `
        <img src="/escudos/${time.clube_id}.png"
             style="
               width: 32px; 
               height: 32px; 
               border-radius: 50%; 
               border: 2px solid ${MOBILE_DARK_HD_CONFIG.colors.border};
               background: ${MOBILE_DARK_HD_CONFIG.colors.surfaceLight};
             "
             onerror="this.outerHTML='<div style=\\'width:32px;height:32px;background:${MOBILE_DARK_HD_CONFIG.colors.surfaceLight};border:2px solid ${MOBILE_DARK_HD_CONFIG.colors.border};border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;\\'>‚öΩ</div>'"
             alt="Escudo">
      ` : `
        <div style="
          width: 32px; 
          height: 32px; 
          background: ${MOBILE_DARK_HD_CONFIG.colors.surfaceLight}; 
          border: 2px solid ${MOBILE_DARK_HD_CONFIG.colors.border}; 
          border-radius: 50%; 
          display: flex; 
          align-items: center; 
          justify-content: center; 
          font-size: 14px;
        ">‚öΩ</div>
      `}
    </div>

    <!-- Informa√ß√µes -->
    <div style="flex: 1; min-width: 0;">
      <div style="
        font: ${MOBILE_DARK_HD_CONFIG.fonts.weights.semibold} ${MOBILE_DARK_HD_CONFIG.fonts.body};
        color: ${MOBILE_DARK_HD_CONFIG.colors.text};
        margin-bottom: 2px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      ">${time.nome_cartola || time.nome_cartoleiro || "N/D"}</div>

      <div style="
        font: ${MOBILE_DARK_HD_CONFIG.fonts.weights.regular} ${MOBILE_DARK_HD_CONFIG.fonts.bodySmall};
        color: ${MOBILE_DARK_HD_CONFIG.colors.textMuted};
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      ">${time.nome_time || "Time n√£o informado"}</div>
    </div>

    <!-- Pontua√ß√£o -->
    <div style="text-align: right; margin-left: 12px;">
      <div style="
        font: ${MOBILE_DARK_HD_CONFIG.fonts.weights.bold} ${MOBILE_DARK_HD_CONFIG.fonts.subheading};
        color: ${posicao <= 3 ? MOBILE_DARK_HD_CONFIG.colors.success : MOBILE_DARK_HD_CONFIG.colors.accent};
      ">${time.pontos || 0}</div>

      <div style="
        font: ${MOBILE_DARK_HD_CONFIG.fonts.weights.regular} ${MOBILE_DARK_HD_CONFIG.fonts.caption};
        color: ${MOBILE_DARK_HD_CONFIG.colors.textMuted};
        margin-top: 2px;
      ">pts</div>
    </div>

  </div>
`;
}