async updateParticipantesCount() {
    try {
        const urlParams = new URLSearchParams(window.location.search);
        const ligaId = urlParams.get("id");

        if (!ligaId) return;

        const response = await fetch(`/api/ligas/${ligaId}`);
        if (response.ok) {
            const liga = await response.json();

            // ATUALIZAR ELEMENTOS EXISTENTES
            const nomeElement = document.getElementById("nomeLiga");
            const quantidadeElement = document.getElementById("quantidadeTimes");

            if (nomeElement) {
                nomeElement.textContent = liga.nome || "Nome da Liga";
            }

            if (quantidadeElement) {
                const totalParticipantes = liga.participantes?.length || liga.times?.length || 0;
                quantidadeElement.textContent = `${totalParticipantes} participantes`;
            }

            // ✅ ADICIONAR: DESTACAR LIGA NO SIDEBAR
            this.highlightCurrentLigaInSidebar(liga);

            console.log(`✅ Liga atualizada: ${liga.nome} com ${liga.participantes?.length || liga.times?.length || 0} participantes`);
        }
    } catch (error) {
        console.warn("⚠️ Erro ao atualizar contador:", error);
    }
}

// ✅ NOVA FUNÇÃO: DESTACAR LIGA ATUAL
highlightCurrentLigaInSidebar(liga) {
    try {
        // Remover destaque de todas as ligas
        const allLigaItems = document.querySelectorAll('.liga-item');
        allLigaItems.forEach(item => {
            item.classList.remove('liga-atual');
        });

        // Adicionar destaque à liga atual
        const currentLigaItem = document.querySelector(`a[href*="id=${liga._id}"]`);
        if (currentLigaItem) {
            currentLigaItem.classList.add('liga-atual');
            
            // Adicionar indicador visual
            if (!currentLigaItem.querySelector('.liga-current-badge')) {
                const badge = document.createElement('span');
                badge.className = 'liga-current-badge';
                badge.textContent = '●';
                badge.style.cssText = 'color: #FF4500; margin-right: 8px; font-size: 12px;';
                currentLigaItem.querySelector('.liga-name').prepend(badge);
            }
        }

        console.log(`✅ Liga "${liga.nome}" destacada no sidebar`);
    } catch (error) {
        console.warn("⚠️ Erro ao destacar liga no sidebar:", error);
    }
}