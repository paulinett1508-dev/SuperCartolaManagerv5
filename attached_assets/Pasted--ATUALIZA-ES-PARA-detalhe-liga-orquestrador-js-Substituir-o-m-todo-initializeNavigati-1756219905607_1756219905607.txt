// === ATUALIZA√á√ïES PARA detalhe-liga-orquestrador.js ===
// Substituir o m√©todo initializeNavigation() e executeAction() 

// NOVO M√âTODO initializeNavigation()
initializeNavigation() {
    const cards = document.querySelectorAll(".module-card");
    
    cards.forEach((card) => {
        if (card.classList.contains("disabled")) return;
        
        card.addEventListener("click", async (e) => {
            if (this.processingModule) return;
            
            // Feedback visual
            card.style.transform = "translateY(-1px) scale(0.98)";
            setTimeout(() => (card.style.transform = ""), 150);
            
            const module = card.dataset.module;
            
            // Mostrar tela secund√°ria
            this.showSecondaryScreen();
            
            // Executar a√ß√£o direta baseada no m√≥dulo
            await this.handleModuleClick(module);
        });
    });
}

// NOVO M√âTODO handleModuleClick()
async handleModuleClick(module) {
    if (this.processingModule) return;
    
    this.processingModule = true;
    
    try {
        switch (module) {
            case "participantes":
                await this.showModule("participantes");
                break;
                
            case "ranking-geral":
                await this.showModule("ranking-geral");
                break;
                
            case "parciais":
                this.redirectToParciais();
                break;
                
            case "top10":
                await this.showModule("top10");
                break;
                
            case "rodadas":
                await this.showModule("rodadas");
                break;
                
            case "melhor-mes":
                await this.showModule("melhor-mes");
                break;
                
            case "mata-mata":
                await this.showModule("mata-mata");
                break;
                
            case "pontos-corridos":
                await this.showModule("pontos-corridos");
                break;
                
            case "luva-de-ouro":
                await this.showModule("luva-de-ouro");
                break;
                
            case "artilheiro-campeao":
                await this.showModule("artilheiro-campeao");
                break;
                
            case "fluxo-financeiro":
                await this.showModule("fluxo-financeiro");
                break;
                
            default:
                document.getElementById("dynamic-content-area").innerHTML = 
                    '<div class="empty-state">Funcionalidade em desenvolvimento</div>';
        }
    } catch (error) {
        console.error(`Erro ao carregar m√≥dulo ${module}:`, error);
        document.getElementById("dynamic-content-area").innerHTML = 
            `<div class="empty-state">Erro: ${error.message}</div>`;
    } finally {
        this.processingModule = false;
    }
}

// ATUALIZAR M√âTODO getFallbackHTML() para incluir novos m√≥dulos
getFallbackHTML(moduleName) {
    const fallbacks = {
        participantes: `
            <div id="participantes-content">
                <div class="module-header-section">
                    <div class="module-title-section">
                        <div class="module-title-icon" id="liga-logo-icon">
                            <img src="/img/logo-cartoleirossobral.png" alt="Logo" class="liga-logo-img">
                        </div>
                        <h2>Participantes da Liga</h2>
                    </div>
                    <div class="module-subtitle">membros ativos na competi√ß√£o</div>
                </div>
                <div class="participants-stats">
                    <div class="stat-card">
                        <div class="stat-icon">üë§</div>
                        <div class="stat-info">
                            <div class="stat-number" id="total-participantes">0</div>
                            <div class="stat-label">Total</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ö°</div>
                        <div class="stat-info">
                            <div class="stat-number" id="participantes-ativos">0</div>
                            <div class="stat-label">Ativos</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-info">
                            <div class="stat-number" id="times-diferentes">0</div>
                            <div class="stat-label">Times √önicos</div>
                        </div>
                    </div>
                </div>
                <div id="participantes-grid" class="participantes-grid">
                    <div class="loading-state-full">Carregando participantes...</div>
                </div>
            </div>
        `,
        
        "ranking-geral": `
            <div id="ranking-geral">
                <div class="ranking-header">
                    <div class="ranking-title">
                        <div class="ranking-icon">üèÜ</div>
                        <h2>Classifica√ß√£o Geral</h2>
                    </div>
                    <div class="ranking-subtitle">pontua√ß√£o acumulada at√© a rodada atual</div>
                </div>
                <div class="loading-state">Processando dados da classifica√ß√£o...</div>
            </div>
        `,
        
        "top10": `
            <div id="top10-content">
                <div class="module-header-section">
                    <h2>üåü Top 10 Melhores</h2>
                    <div class="module-subtitle">Mitos e Micos de todas as rodadas</div>
                </div>
                <div id="top10MitosTable" class="top10-section"></div>
                <div id="top10MitosExportBtnContainer"></div>
                <div id="top10MicosTable" class="top10-section"></div>
                <div id="top10MicosExportBtnContainer"></div>
            </div>
        `,
        
        "rodadas": `
            <div id="rodadas">
                <div class="module-header-section">
                    <h2>üìÖ Resultados por Rodada</h2>
                </div>
                <div class="mb-3">
                    <select id="rodadaSelect" class="form-control">
                        <option value="">Escolha uma rodada</option>
                    </select>
                </div>
                <div class="table-responsive">
                    <table class="ranking-table">
                        <thead>
                            <tr>
                                <th>Pos</th><th>‚ù§Ô∏è</th><th>Cartoleiro</th>
                                <th>Time</th><th>Pontos</th><th>Banco</th>
                            </tr>
                        </thead>
                        <tbody id="rankingBody">
                            <tr><td colspan="6" class="empty-state">Selecione uma rodada</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        `,
        
        "melhor-mes": `
            <div id="melhor-mes-content">
                <div class="module-header-section">
                    <h2>üìà Melhor M√™s</h2>
                    <div class="module-subtitle">Rankings mensais consolidados</div>
                </div>
                <div class="loading-state">Carregando dados mensais...</div>
            </div>
        `,
        
        "mata-mata": `
            <div id="mata-mata-content">
                <div class="module-header-section">
                    <h2>‚öîÔ∏è Mata-Mata</h2>
                    <div class="module-subtitle">Confrontos eliminat√≥rios</div>
                </div>
                <div class="loading-state">Carregando confrontos...</div>
            </div>
        `,
        
        "pontos-corridos": `
            <div id="pontos-corridos-content">
                <div class="module-header-section">
                    <h2>‚ö° Pontos Corridos</h2>
                    <div class="module-subtitle">Todos contra todos</div>
                </div>
                <div class="loading-state">Carregando tabela...</div>
            </div>
        `,
        
        "luva-de-ouro": `
            <div id="luva-de-ouro-content">
                <div class="module-header-section">
                    <h2>ü•Ö Luva de Ouro</h2>
                    <div class="module-subtitle">Ranking dos melhores goleiros</div>
                </div>
                <div class="loading-state">Carregando dados dos goleiros...</div>
            </div>
        `,
        
        "artilheiro-campeao": `
            <div id="artilheiro-content">
                <div class="module-header-section">
                    <h2>‚öΩ Artilheiro Campe√£o</h2>
                    <div class="module-subtitle">Maiores pontuadores por rodada</div>
                </div>
                <div class="loading-state">Carregando artilheiros...</div>
            </div>
        `,
        
        "fluxo-financeiro": `
            <div id="fluxo-financeiro-content">
                <div class="module-header-section">
                    <h2>üí∞ Fluxo Financeiro</h2>
                    <div class="module-subtitle">Controle de pr√™mios e pagamentos</div>
                </div>
                <div class="loading-state">Carregando dados financeiros...</div>
            </div>
        `
    };
    
    return fallbacks[moduleName] || `
        <div class="empty-state">
            <h4>M√≥dulo ${moduleName}</h4>
            <p>Funcionalidade em desenvolvimento</p>
        </div>
    `;
}

// ATUALIZAR CONFIGURA√á√ÉO DOS CARDS CONDICIONAIS
// No arquivo cards-condicionais.js, adicionar:
const CARDS_CONFIG = {
    // Super Cartola 2025 - Desabilitar Pr√™mios individuais
    "684cb1c8af923da7c7df51de": {
        disabled: ["luva-de-ouro", "artilheiro-campeao"],
        reason: "Pr√™mios n√£o se aplicam a esta liga",
    },

    // Cartoleiros do Sobral - Desabilitar Competi√ß√µes individuais  
    "684d821cf1a7ae16d1f89572": {
        disabled: ["mata-mata", "pontos-corridos"],
        reason: "Competi√ß√µes n√£o se aplicam a esta liga",
    },
    
    // Configura√ß√µes adicionais podem ser adicionadas aqui
};

// REMOVER O M√âTODO executeAction() ANTIGO
// N√£o mais necess√°rio pois cada card agora √© independente