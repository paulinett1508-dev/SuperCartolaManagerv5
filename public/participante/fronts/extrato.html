<div id="extratoFinanceiro" class="extrato-container">
    <!-- Header Compacto Profissional -->
    <div class="extrato-header-pro">
        <div class="header-row">
            <div class="header-left">
                <div class="title-group">
                    <span class="material-icons icon-title"
                        >monetization_on</span
                    >
                    <h2 class="extrato-title">EXTRATO</h2>
                </div>
                <div class="saldo-status-badge" id="saldoStatusBadge">
                    <span class="status-text">A RECEBER</span>
                </div>
            </div>

            <div class="header-right">
                <span class="saldo-valor-header" id="saldoTotalHeader"
                    >R$ 0,00</span
                >
                <button
                    id="btnRefreshExtrato"
                    class="btn-refresh-extrato"
                    title="Atualizar dados"
                >
                    <span class="material-icons">sync</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Cards Resumo - Estilo Profissional -->
    <div class="resumo-cards-pro">
        <div
            class="resumo-card-pro ganhos"
            onclick="window.mostrarDetalhamentoGanhos()"
        >
            <div class="card-content">
                <div class="card-icon-label">
                    <span class="material-icons icon-ganhos">emoji_events</span>
                    <span class="card-label">TUDO QUE GANHOU</span>
                </div>
                <span id="totalGanhosHeader" class="card-valor ganhos"
                    >+R$ 0,00</span
                >
            </div>
            <span class="material-icons arrow">chevron_right</span>
        </div>

        <div
            class="resumo-card-pro perdas"
            onclick="window.mostrarDetalhamentoPerdas()"
        >
            <div class="card-content">
                <div class="card-icon-label">
                    <span class="material-icons icon-perdas"
                        >sentiment_very_dissatisfied</span
                    >
                    <span class="card-label">TUDO QUE PERDEU</span>
                </div>
                <span id="totalPerdeuHeader" class="card-valor perdas"
                    >R$ 0,00</span
                >
            </div>
            <span class="material-icons arrow">chevron_right</span>
        </div>
    </div>

    <!-- Gráfico de Evolução Financeira -->
    <div class="grafico-evolucao-container">
        <div class="grafico-header">
            <h3 class="grafico-titulo">Evolução Financeira</h3>
            <div class="grafico-filtros">
                <button class="filtro-btn active" data-range="all">Tudo</button>
                <button class="filtro-btn" data-range="10">10R</button>
                <button class="filtro-btn" data-range="5">5R</button>
            </div>
        </div>
        <div class="grafico-area" id="graficoEvolucao">
            <svg
                class="grafico-svg"
                viewBox="0 0 300 160"
                preserveAspectRatio="none"
                fill="none"
            >
                <defs>
                    <linearGradient
                        id="chartGradient"
                        x1="0"
                        x2="0"
                        y1="0"
                        y2="1"
                    >
                        <stop
                            offset="0%"
                            stop-color="#ff5c00"
                            stop-opacity="0.4"
                        ></stop>
                        <stop
                            offset="100%"
                            stop-color="#ff5c00"
                            stop-opacity="0"
                        ></stop>
                    </linearGradient>
                </defs>
                <!-- Linhas de grade -->
                <line class="grade-line" x1="0" x2="300" y1="40" y2="40"></line>
                <line class="grade-line" x1="0" x2="300" y1="80" y2="80"></line>
                <line
                    class="grade-line"
                    x1="0"
                    x2="300"
                    y1="120"
                    y2="120"
                ></line>
                <!-- Path do gráfico (será preenchido via JS) -->
                <path id="graficoPath" class="grafico-linha" d=""></path>
                <path id="graficoArea" class="grafico-fill" d=""></path>
            </svg>
            <div class="grafico-labels" id="graficoLabels">
                <span>1ª</span>
                <span>5ª</span>
                <span>10ª</span>
                <span>15ª</span>
                <span>20ª</span>
            </div>
        </div>
    </div>

    <!-- Tabela de Transações -->
    <div id="fluxoFinanceiroContent" class="extrato-content-pro">
        <div class="loading-state">
            <div class="spinner"></div>
            <p>Carregando extrato...</p>
        </div>
    </div>
</div>

<style>
    /* ===== DESIGN PROFISSIONAL - EXTRATO ===== */
    @import url("https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap");
    @import url("https://fonts.googleapis.com/icon?family=Material+Icons");

    /* Variáveis de cor */
    :root {
        --ext-primary: #ff5c00;
        --ext-primary-light: rgba(255, 92, 0, 0.15);
        --ext-primary-dark: rgba(255, 92, 0, 0.4);
        --ext-bg: #121212;
        --ext-surface: #1c1c1c;
        --ext-surface-light: #2a2a2a;
        --ext-green: #22c55e;
        --ext-green-bg: rgba(34, 197, 94, 0.15);
        --ext-green-border: rgba(34, 197, 94, 0.4);
        --ext-red: #ef4444;
        --ext-red-bg: rgba(239, 68, 68, 0.15);
        --ext-red-border: rgba(239, 68, 68, 0.4);
        --ext-yellow: #eab308;
        --ext-text: #ffffff;
        --ext-text-secondary: rgba(255, 255, 255, 0.7);
        --ext-text-muted: rgba(255, 255, 255, 0.5);
    }

    .extrato-container {
        font-family: "Roboto", sans-serif;
        padding: 0;
        max-width: 100%;
    }

    /* ===== HEADER PROFISSIONAL ===== */
    .extrato-header-pro {
        background: linear-gradient(
            135deg,
            rgba(255, 92, 0, 0.25) 0%,
            rgba(255, 92, 0, 0.08) 100%
        );
        padding: 12px 16px;
        border-bottom: 1px solid rgba(255, 92, 0, 0.3);
    }

    .header-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
    }

    .header-left {
        display: flex;
        flex-direction: column;
        gap: 6px;
    }

    .title-group {
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .icon-title {
        color: var(--ext-primary);
        font-size: 18px;
    }

    .extrato-title {
        font-size: 12px;
        font-weight: 700;
        color: var(--ext-primary);
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .saldo-status-badge {
        display: inline-flex;
        align-items: center;
        padding: 3px 10px;
        border-radius: 20px;
        background: var(--ext-green-bg);
        border: 1px solid var(--ext-green-border);
        width: fit-content;
    }

    .status-text {
        font-size: 10px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.3px;
        color: var(--ext-green);
    }

    .header-right {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .saldo-valor-header {
        font-size: 24px;
        font-weight: 700;
        color: var(--ext-green);
        white-space: nowrap;
        font-family: "Roboto", sans-serif;
    }

    .btn-refresh-extrato {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border: none;
        background: rgba(255, 92, 0, 0.3);
        color: var(--ext-text);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
    }

    .btn-refresh-extrato .material-icons {
        font-size: 18px;
    }

    .btn-refresh-extrato:active {
        transform: scale(0.95);
        background: rgba(255, 92, 0, 0.5);
    }

    .btn-refresh-extrato.loading .material-icons {
        animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }

    /* ===== CARDS RESUMO PROFISSIONAL ===== */
    .resumo-cards-pro {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        padding: 12px;
    }

    .resumo-card-pro {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .resumo-card-pro.ganhos {
        background: linear-gradient(
            135deg,
            rgba(34, 197, 94, 0.2) 0%,
            rgba(34, 197, 94, 0.05) 100%
        );
        border: 1px solid var(--ext-green-border);
    }

    .resumo-card-pro.perdas {
        background: linear-gradient(
            135deg,
            rgba(239, 68, 68, 0.2) 0%,
            rgba(239, 68, 68, 0.05) 100%
        );
        border: 1px solid var(--ext-red-border);
    }

    .resumo-card-pro:active {
        transform: scale(0.98);
    }

    .card-content {
        display: flex;
        flex-direction: column;
        gap: 6px;
    }

    .card-icon-label {
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .icon-ganhos {
        color: var(--ext-yellow);
        font-size: 14px;
    }

    .icon-perdas {
        color: var(--ext-yellow);
        font-size: 14px;
    }

    .card-label {
        font-size: 10px;
        color: var(--ext-text-secondary);
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.2px;
    }

    .card-valor {
        font-size: 16px;
        font-weight: 700;
        color: var(--ext-text);
    }

    .card-valor.ganhos {
        color: var(--ext-green);
    }

    .card-valor.perdas {
        color: var(--ext-red);
    }

    .resumo-card-pro .arrow {
        color: var(--ext-text-muted);
        font-size: 20px;
    }

    /* ===== GRÁFICO DE EVOLUÇÃO ===== */
    .grafico-evolucao-container {
        background: rgba(39, 39, 42, 0.5);
        border: 1px solid rgba(63, 63, 70, 0.5);
        border-radius: 12px;
        padding: 16px;
        margin: 12px;
    }

    .grafico-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
    }

    .grafico-titulo {
        font-size: 14px;
        font-weight: 700;
        color: var(--ext-text);
        margin: 0;
    }

    .grafico-filtros {
        display: flex;
        gap: 4px;
        background: rgba(63, 63, 70, 0.5);
        padding: 4px;
        border-radius: 8px;
    }

    .filtro-btn {
        padding: 6px 12px;
        border: none;
        border-radius: 6px;
        font-size: 11px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        background: transparent;
        color: var(--ext-text-muted);
    }

    .filtro-btn.active {
        background: rgba(255, 92, 0, 0.8);
        color: var(--ext-text);
    }

    .filtro-btn:not(.active):hover {
        color: var(--ext-text-secondary);
    }

    .grafico-area {
        position: relative;
        height: 140px;
    }

    .grafico-svg {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
    }

    .grade-line {
        stroke: rgba(63, 63, 70, 0.6);
        stroke-dasharray: 2 2;
    }

    .grafico-linha {
        stroke: var(--ext-primary);
        stroke-width: 2.5;
        fill: none;
        stroke-linecap: round;
        stroke-linejoin: round;
    }

    .grafico-fill {
        fill: url(#chartGradient);
    }

    .grafico-labels {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        display: flex;
        justify-content: space-between;
        padding: 0 4px;
    }

    .grafico-labels span {
        font-size: 10px;
        color: var(--ext-text-muted);
    }

    /* ===== CONTEÚDO TABELA ===== */
    .extrato-content-pro {
        padding: 8px 12px;
        min-height: 200px;
    }

    /* Loading */
    .loading-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 40px 20px;
    }

    .spinner {
        width: 28px;
        height: 28px;
        border: 3px solid rgba(255, 92, 0, 0.2);
        border-top-color: var(--ext-primary);
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
    }

    .loading-state p {
        margin-top: 12px;
        color: var(--ext-text-muted);
        font-size: 12px;
    }

    /* ===== RESPONSIVO ===== */
    @media (max-width: 360px) {
        .saldo-valor-header {
            font-size: 20px;
        }

        .card-valor {
            font-size: 14px;
        }

        .resumo-card-pro {
            padding: 10px;
        }
    }

    @media (min-width: 768px) {
        .extrato-container {
            padding: 16px;
            max-width: 800px;
            margin: 0 auto;
        }

        .extrato-header-pro {
            padding: 20px 24px;
            border-radius: 16px;
        }

        .saldo-valor-header {
            font-size: 32px;
        }

        .resumo-cards-pro {
            gap: 16px;
            padding: 16px 0;
        }

        .resumo-card-pro {
            padding: 16px 20px;
            border-radius: 16px;
        }

        .card-valor {
            font-size: 20px;
        }
    }
</style>
