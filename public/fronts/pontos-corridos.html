<!-- PONTOS CORRIDOS FRONT - Interface Principal -->
<div id="pontos-corridos" class="module-content">
  <!-- Header do M√≥dulo -->
  <div class="pontos-corridos-header">
    <h2 class="pontos-corridos-titulo">Liga Pontos Corridos</h2>
    <p class="pontos-corridos-subtitulo">
      Sistema de confrontos todos contra todos
    </p>
  </div>

  <!-- Seletor de Rodada -->
  <div id="pontosCorridosSelect" class="pontos-corridos-selector">
    <!-- Ser√° preenchido via JavaScript -->
  </div>

  <!-- Conte√∫do Principal -->
  <div id="pontosCorridosRodada" class="pontos-corridos-content">
    <!-- Ser√° preenchido via JavaScript -->
  </div>

  <!-- Estado Inicial -->
  <div
    id="pontosCorridosInicial"
    class="pontos-corridos-inicial"
    style="display: none"
  >
    <div class="pontos-corridos-loading">
      <p>Carregando sistema de pontos corridos...</p>
    </div>
  </div>

  <!-- Bot√£o Voltar -->
  <div class="pontos-corridos-footer">
    <button class="btn-voltar" onclick="window.voltarParaCards()">
      ‚Üê Voltar aos Cards
    </button>
  </div>
</div>

<div>
  <div class="instrucao-inicial">
    <p>Selecione uma rodada para ver os confrontos da Liga Pontos Corridos</p>
  </div>
</div>

<!-- ‚úÖ SCRIPT DE INICIALIZA√á√ÉO - ADICIONADO -->
<script>
  (function () {
    console.log(
      "[PONTOS-CORRIDOS-HTML] Registrando fun√ß√£o global de inicializa√ß√£o...",
    );

    // ‚úÖ EXPOR FUN√á√ÉO GLOBAL PARA O ORQUESTRADOR
    window.carregarPontosCorridos = async function () {
      console.log("[PONTOS-CORRIDOS] Iniciando carregamento do m√≥dulo...");

      try {
        // Obter ligaId
        const ligaId =
          window.ligaAtual?.id || window.orquestrador?.ligaAtual?.id;

        if (!ligaId) {
          console.error("[PONTOS-CORRIDOS] Liga ID n√£o encontrado");
          return;
        }

        console.log("[PONTOS-CORRIDOS] Liga ID:", ligaId);

        // Verificar se container existe
        const container = document.getElementById("pontosCorridosRodada");
        if (!container) {
          console.error(
            "[PONTOS-CORRIDOS] Container 'pontosCorridosRodada' n√£o encontrado",
          );
          return;
        }

        // Mostrar loading
        container.innerHTML = `
        <div style="padding: 40px; text-align: center;">
          <div style="
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,69,0,0.1);
            border-top: 4px solid #ff4500;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
          "></div>
          <p style="color: #999;">Carregando dados da liga...</p>
        </div>
        <style>
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        </style>
      `;

        // Importar e inicializar m√≥dulo UI
        const { renderizarInterface } = await import(
          "/js/pontos-corridos/pontos-corridos-ui.js"
        );

        // Renderizar interface no container principal
        const mainContainer = document.getElementById("pontos-corridos");

        renderizarInterface(
          mainContainer,
          ligaId,
          (rodada) =>
            console.log("[PONTOS-CORRIDOS] Rodada selecionada:", rodada),
          () => console.log("[PONTOS-CORRIDOS] Visualizar classifica√ß√£o"),
        );

        console.log("[PONTOS-CORRIDOS] M√≥dulo carregado com sucesso");
      } catch (error) {
        console.error("[PONTOS-CORRIDOS] Erro ao carregar m√≥dulo:", error);

        const container = document.getElementById("pontosCorridosRodada");
        if (container) {
          container.innerHTML = `
          <div style="padding: 40px; text-align: center; background: #1a1a1a; border-radius: 12px; border: 2px solid #ef4444;">
            <div style="font-size: 48px; margin-bottom: 16px;">‚ùå</div>
            <h3 style="color: #ef4444; margin-bottom: 12px;">Erro ao Carregar M√≥dulo</h3>
            <p style="color: #999; margin-bottom: 20px;">${error.message}</p>
            <button onclick="window.location.reload()" style="
              padding: 12px 24px;
              background: #ff4500;
              color: white;
              border: none;
              border-radius: 8px;
              cursor: pointer;
              font-weight: 600;
            ">üîÑ Recarregar</button>
          </div>
        `;
        }
      }
    };

    // Alias para compatibilidade
    window.inicializarPontosCorridos = window.carregarPontosCorridos;

    console.log(
      "[PONTOS-CORRIDOS-HTML] ‚úÖ window.carregarPontosCorridos() registrada",
    );
    console.log(
      "[PONTOS-CORRIDOS-HTML] ‚úÖ window.inicializarPontosCorridos() registrada",
    );
  })();
</script>
