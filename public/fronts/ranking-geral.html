<!-- üèÖ M√ìDULO RANKING GERAL - HTML SEPARADO -->
<div id="ranking-geral">
    <!-- Header do Ranking -->
    <div class="ranking-header">
        <div class="ranking-title">
            <div class="ranking-icon">üèÖ</div>
            <h2>Classifica√ß√£o Geral</h2>
        </div>
        <div class="ranking-subtitle">
            pontua√ß√£o acumulada at√© a rodada atual
        </div>
    </div>

    <!-- Controles do Ranking -->
    <div class="ranking-controls">
        <div class="ranking-info">üìà Carregando participantes...</div>
        <div id="rankingGeralExportBtnContainer" class="export-btn-container">
            <!-- Bot√£o de exporta√ß√£o ser√° inserido aqui pelo JS -->
        </div>
    </div>

    <!-- Tabela do Ranking -->
    <div class="ranking-table-container">
        <table id="rankingGeralTable" class="ranking-table">
            <thead>
                <tr>
                    <th style="width: 60px; text-align: center">Posi√ß√£o</th>
                    <th style="width: 50px; text-align: center">‚ù§Ô∏è</th>
                    <th style="min-width: 180px; text-align: left">
                        Cartoleiro
                    </th>
                    <th style="min-width: 140px; text-align: left">Time</th>
                    <th style="width: 100px; text-align: center">Pontos</th>
                </tr>
            </thead>
            <tbody id="rankingGeralTableBody">
                <tr>
                    <td colspan="5" class="loading-state">
                        <div
                            style="
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                gap: 12px;
                                padding: 40px;
                            "
                        >
                            <div
                                style="
                                    width: 32px;
                                    height: 32px;
                                    border: 3px solid rgba(255, 69, 0, 0.3);
                                    border-top: 3px solid #ff4500;
                                    border-radius: 50%;
                                    animation: spin 1s linear infinite;
                                "
                            ></div>
                            <span style="color: #ff4500; font-weight: 600"
                                >Processando dados da classifica√ß√£o...</span
                            >
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Bot√£o Voltar -->
    <div class="module-actions">
        <button
            class="back-button"
            onclick="window.orquestrador?.voltarParaCards()"
        >
            ‚Üê Voltar aos Cards
        </button>
    </div>
</div>

<style>
    /* CSS espec√≠fico do m√≥dulo ranking-geral */
    .ranking-table-container {
        background: rgba(26, 26, 26, 0.9);
        border-radius: 12px;
        overflow: hidden;
        border: 1px solid rgba(255, 69, 0, 0.3);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    }

    .ranking-table tbody tr:nth-child(1) {
        background: linear-gradient(
            135deg,
            rgba(255, 215, 0, 0.15) 0%,
            rgba(255, 193, 7, 0.1) 100%
        );
        border-left: 4px solid #ffd700;
    }

    .ranking-table tbody tr:nth-child(2) {
        background: linear-gradient(
            135deg,
            rgba(192, 192, 192, 0.15) 0%,
            rgba(169, 169, 169, 0.1) 100%
        );
        border-left: 4px solid #c0c0c0;
    }

    .ranking-table tbody tr:nth-child(3) {
        background: linear-gradient(
            135deg,
            rgba(205, 127, 50, 0.15) 0%,
            rgba(184, 115, 51, 0.1) 100%
        );
        border-left: 4px solid #cd7f32;
    }

    .ranking-table tbody tr:hover {
        background: rgba(255, 69, 0, 0.08);
        transform: scale(1.01);
    }

    .module-actions {
        margin-top: 20px;
        text-align: left;
    }

    .back-button {
        background: rgba(255, 69, 0, 0.1);
        border: 1px solid rgba(255, 69, 0, 0.3);
        color: #ff4500;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 13px;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .back-button:hover {
        background: #ff4500;
        color: #ffffff;
        transform: translateX(-3px);
    }
</style>

<script>
    // JavaScript espec√≠fico do m√≥dulo ranking-geral
    (function () {
        console.log("üìä M√≥dulo Ranking Geral carregado");

        // Aguardar um momento para garantir que o ranking.js seja executado
        setTimeout(() => {
            // Aplicar estilos espec√≠ficos quando a tabela for populada
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === "childList") {
                        const table =
                            document.getElementById("rankingGeralTable");
                        if (
                            table &&
                            table.querySelector("tbody tr:not(.loading-state)")
                        ) {
                            // Tabela foi populada, aplicar estilos finais
                            applyRankingStyles();
                            observer.disconnect();
                        }
                    }
                });
            });

            const tableBody = document.getElementById("rankingGeralTableBody");
            if (tableBody) {
                observer.observe(tableBody, { childList: true, subtree: true });
            }
        }, 100);

        function applyRankingStyles() {
            // Garantir que bot√µes de exporta√ß√£o tenham o estilo correto
            const exportBtns = document.querySelectorAll(
                "#rankingGeralExportBtnContainer button",
            );
            exportBtns.forEach((btn) => {
                btn.style.background =
                    "linear-gradient(135deg, #ff4500 0%, #e8472b 100%)";
                btn.style.color = "white";
                btn.style.border = "2px solid rgba(255, 69, 0, 0.3)";
                btn.style.fontWeight = "700";
                btn.style.textTransform = "uppercase";
                btn.style.letterSpacing = "0.5px";
            });
        }
    })();
</script>
