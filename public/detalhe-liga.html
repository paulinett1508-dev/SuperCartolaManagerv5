<!doctype html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Detalhe da Liga - Super Cartola Manager</title>
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
        <link rel="stylesheet" href="style.css" />

        <style>
            /* === CARDS ORGANIZADOS PROFISSIONAL === */
            .page-content {
                background: #1a1a1a;
                min-height: calc(100vh - 100px);
                padding: 20px;
            }

            .liga-header {
                margin-bottom: 25px;
                background: linear-gradient(135deg, #2a2a2a 0%, #1e1e1e 100%);
                border-radius: 12px;
                padding: 25px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
                border: 1px solid rgba(255, 69, 0, 0.2);
            }

            .liga-titulo {
                color: #ffffff;
                margin-bottom: 5px;
                font-size: 22px;
                font-weight: 700;
            }

            .liga-info {
                color: #a0a0a0;
                margin: 0;
                font-size: 14px;
            }

            /* === GRID DE CARDS === */
            .modules-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 15px;
                margin: 20px 0;
            }

            .module-card {
                background: linear-gradient(135deg, #2a2a2a 0%, #1e1e1e 100%);
                border-radius: 12px;
                padding: 18px;
                border: 1px solid rgba(255, 69, 0, 0.2);
                cursor: pointer;
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
            }

            .module-card::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 3px;
                background: linear-gradient(135deg, #ff4500 0%, #e8472b 100%);
                opacity: 0;
                transition: opacity 0.3s ease;
            }

            .module-card:hover {
                transform: translateY(-3px);
                box-shadow: 0 12px 28px rgba(255, 69, 0, 0.25);
                border-color: #ff4500;
            }

            .module-card:hover::before {
                opacity: 1;
            }

            .module-header {
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 12px;
            }

            .module-icon {
                font-size: 20px;
                color: #ff4500;
                min-width: 24px;
            }

            .module-title {
                color: #ffffff;
                font-size: 14px;
                font-weight: 600;
                margin: 0;
            }

            .module-items {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            .module-items li {
                color: #a0a0a0;
                font-size: 12px;
                padding: 3px 0;
                display: flex;
                align-items: center;
                gap: 6px;
            }

            .module-items li::before {
                content: "‚Ä¢";
                color: #ff4500;
                font-weight: bold;
            }

            /* === CONTE√öDO DIN√ÇMICO === */
            .dynamic-content {
                display: none;
                background: linear-gradient(135deg, #2a2a2a 0%, #1e1e1e 100%);
                border-radius: 12px;
                padding: 25px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
                border: 1px solid rgba(255, 69, 0, 0.2);
                margin-top: 20px;
                animation: fadeInUp 0.3s ease-out;
            }

            .dynamic-content.active {
                display: block;
            }

            .back-button {
                background: rgba(255, 69, 0, 0.1);
                border: 1px solid rgba(255, 69, 0, 0.3);
                color: #ff4500;
                padding: 8px 15px;
                border-radius: 8px;
                cursor: pointer;
                font-size: 12px;
                font-weight: 600;
                margin-bottom: 20px;
                transition: all 0.3s ease;
            }

            .back-button:hover {
                background: #ff4500;
                color: #ffffff;
            }

            /* === PARTICIPANTES ESPEC√çFICO === */
            .participantes-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 12px;
                margin-top: 15px;
            }

            .participante-card {
                background: rgba(42, 42, 42, 0.6);
                border-radius: 8px;
                padding: 12px;
                border: 1px solid rgba(255, 69, 0, 0.15);
                transition: all 0.3s ease;
                cursor: pointer;
            }

            .participante-card:hover {
                background: rgba(255, 69, 0, 0.1);
                border-color: #ff4500;
                transform: scale(1.02);
            }

            .participante-escudo {
                width: 24px;
                height: 24px;
                border-radius: 50%;
                margin-bottom: 8px;
            }

            .participante-nome {
                color: #ffffff;
                font-size: 13px;
                font-weight: 600;
                margin-bottom: 2px;
            }

            .participante-time {
                color: #a0a0a0;
                font-size: 11px;
            }

            /* === TABELAS COMPACTAS === */
            .ranking-table {
                width: 100%;
                border-collapse: collapse;
                background: rgba(26, 26, 26, 0.8);
                border-radius: 8px;
                overflow: hidden;
                border: 1px solid rgba(255, 69, 0, 0.2);
            }

            .ranking-table th {
                background: linear-gradient(135deg, #ff4500 0%, #e8472b 100%);
                color: #ffffff;
                padding: 10px 8px;
                font-weight: 600;
                text-transform: uppercase;
                font-size: 11px;
                letter-spacing: 0.5px;
            }

            .ranking-table td {
                padding: 8px;
                border-bottom: 1px solid rgba(255, 69, 0, 0.1);
                color: #e0e0e0;
                font-size: 12px;
            }

            /* === RESPONSIVIDADE === */
            @media (max-width: 768px) {
                .modules-grid {
                    grid-template-columns: 1fr;
                    gap: 12px;
                }

                .participantes-grid {
                    grid-template-columns: repeat(2, 1fr);
                }

                .module-card {
                    padding: 15px;
                }

                .liga-titulo {
                    font-size: 18px;
                }
            }

            @media (max-width: 480px) {
                .participantes-grid {
                    grid-template-columns: 1fr;
                }
            }

            /* === LOADING STATES === */
            .processing-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: none;
                justify-content: center;
                align-items: center;
                z-index: 9999;
                flex-direction: column;
                gap: 15px;
            }

            .processing-overlay.active {
                display: flex;
            }

            .spinner {
                width: 40px;
                height: 40px;
                border: 4px solid rgba(255, 69, 0, 0.2);
                border-top: 4px solid #ff4500;
                border-radius: 50%;
                animation: spin 1s linear infinite;
            }

            .processing-text {
                color: #ffffff;
                font-size: 16px;
                font-weight: 600;
            }

            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }

            /* === ESTADOS === */
            .loading-state {
                text-align: center;
                padding: 30px;
                color: #a0a0a0;
                font-size: 13px;
            }

            .empty-state {
                text-align: center;
                padding: 40px;
                color: #666666;
                font-style: italic;
                font-size: 13px;
            }

            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(15px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        </style>

        <!-- Lucide Icons -->
        <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
    </head>

    <body>
        <div class="app-container">
            <div id="sidebar-placeholder"></div>

            <main class="app-main">
                <!-- Header removido para eliminar redund√¢ncia -->

                <div class="page-content">
                    <!-- Header da Liga Simplificado -->
                    <div class="liga-header">
                        <h2 id="nomeLiga" class="liga-titulo">Nome da Liga</h2>
                        <p id="quantidadeTimes" class="liga-info">
                            0 participantes
                        </p>
                    </div>

                    <!-- Tela Principal - Cards Organizados -->
                    <div id="main-screen" class="main-screen">
                        <div class="modules-grid">
                            <!-- Card Participantes -->
                            <div
                                class="module-card"
                                data-module="participantes"
                            >
                                <div class="module-header">
                                    <i
                                        class="module-icon"
                                        data-lucide="users"
                                    ></i>
                                    <h3 class="module-title">PARTICIPANTES</h3>
                                </div>
                                <ul class="module-items">
                                    <li>Lista completa</li>
                                    <li id="participantes-count">0 membros</li>
                                </ul>
                            </div>

                            <!-- Card Rankings -->
                            <div class="module-card" data-module="rankings">
                                <div class="module-header">
                                    <i
                                        class="module-icon"
                                        data-lucide="bar-chart-3"
                                    ></i>
                                    <h3 class="module-title">RANKINGS</h3>
                                </div>
                                <ul class="module-items">
                                    <li data-action="ranking-geral">Geral</li>
                                    <li data-action="top10">Top 10</li>
                                </ul>
                            </div>

                            <!-- Card Temporal -->
                            <div class="module-card" data-module="temporal">
                                <div class="module-header">
                                    <i
                                        class="module-icon"
                                        data-lucide="calendar"
                                    ></i>
                                    <h3 class="module-title">TEMPORAL</h3>
                                </div>
                                <ul class="module-items">
                                    <li data-action="rodadas">Rodadas</li>
                                    <li data-action="melhor-mes">Melhor M√™s</li>
                                </ul>
                            </div>

                            <!-- Card Competi√ß√µes -->
                            <div class="module-card" data-module="competicoes">
                                <div class="module-header">
                                    <i
                                        class="module-icon"
                                        data-lucide="zap"
                                    ></i>
                                    <h3 class="module-title">COMPETI√á√ïES</h3>
                                </div>
                                <ul class="module-items">
                                    <li data-action="mata-mata">Mata-mata</li>
                                    <li data-action="pontos-corridos">
                                        Pontos
                                    </li>
                                </ul>
                            </div>

                            <!-- Card Pr√™mios -->
                            <div class="module-card" data-module="premios">
                                <div class="module-header">
                                    <i
                                        class="module-icon"
                                        data-lucide="award"
                                    ></i>
                                    <h3 class="module-title">PR√äMIOS</h3>
                                </div>
                                <ul class="module-items">
                                    <li data-action="luva-de-ouro">
                                        Luva Ouro
                                    </li>
                                    <li data-action="artilheiro-campeao">
                                        Artilheiro
                                    </li>
                                </ul>
                            </div>

                            <!-- Card Financeiro -->
                            <div class="module-card" data-module="financeiro">
                                <div class="module-header">
                                    <i
                                        class="module-icon"
                                        data-lucide="dollar-sign"
                                    ></i>
                                    <h3 class="module-title">FINANCEIRO</h3>
                                </div>
                                <ul class="module-items">
                                    <li data-action="fluxo-financeiro">
                                        Fluxo
                                    </li>
                                    <li>Extrato</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Tela Secund√°ria - Conte√∫do Din√¢mico -->
                    <div id="secondary-screen" class="dynamic-content">
                        <button class="back-button" onclick="voltarParaCards()">
                            ‚Üê Voltar aos M√≥dulos
                        </button>
                        <div id="dynamic-content-area">
                            <!-- Conte√∫do ser√° injetado aqui -->
                        </div>
                    </div>
                </div>
            </main>

            <!-- Overlay de Loading -->
            <div id="processing-overlay" class="processing-overlay">
                <div class="spinner"></div>
                <div class="processing-text">Carregando dados...</div>
            </div>
        </div>

        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

        <!-- Scripts M√≥dulos -->
        <script src="js/sistema-modulos-init.js"></script>
        <script type="module" src="js/utils.js"></script>
        <script type="module" src="js/navigation.js"></script>
        <script type="module" src="js/participantes.js"></script>
        <script type="module" src="js/ranking.js"></script>
        <script type="module" src="js/rodadas.js"></script>
        <script type="module" src="js/mata-mata.js"></script>
        <script type="module" src="js/pontos-corridos.js"></script>
        <script type="module" src="js/pontos-corridos-utils.js"></script>
        <script type="module" src="js/luva-de-ouro.js"></script>
        <script type="module" src="js/artilheiro-campeao.js"></script>
        <script type="module" src="js/melhor-mes.js"></script>
        <script type="module" src="js/top10.js"></script>
        <script type="module" src="js/fluxo-financeiro.js"></script>
        <script type="module" src="js/gols.js"></script>
        <script type="module" src="js/gols-por-rodada.js"></script>
        <script type="module" src="js/liga-modificacoes.js"></script>
        <script type="module" src="js/filtro-liga-especial.js"></script>
        <script type="module" src="js/gerenciar-ligas.js"></script>
        <script src="js/seletor-ligas.js"></script>

        <script type="module">
            import {
                carregarDadosBasicos,
                carregarDetalhesLiga,
            } from "./js/participantes.js";

            // Sistema de controle seguro mantido
            let processingModule = false;
            const modules = {};

            // Carregar layout (sem header)
            async function loadLayout() {
                try {
                    const response = await fetch("layout.html");
                    const layoutHtml = await response.text();
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(layoutHtml, "text/html");

                    // Apenas sidebar, sem header
                    const sidebar = doc.querySelector(".app-sidebar");
                    if (sidebar) {
                        document
                            .getElementById("sidebar-placeholder")
                            .replaceWith(sidebar);
                    }

                    const scripts = doc.querySelectorAll("script");
                    scripts.forEach((script) => {
                        if (script.textContent.trim()) {
                            const newScript = document.createElement("script");
                            newScript.textContent = script.textContent;
                            document.head.appendChild(newScript);
                        }
                    });
                } catch (error) {
                    console.error("Erro ao carregar layout:", error);
                }
            }

            // Carregar m√≥dulos din√¢micos
            async function loadModules() {
                try {
                    modules.ranking = await import("./js/ranking.js");
                    modules.rodadas = await import("./js/rodadas.js");
                    modules.mataMata = await import("./js/mata-mata.js");
                    modules.pontosCorreidos = await import(
                        "./js/pontos-corridos.js"
                    );
                    modules.luvaDeOuro = await import("./js/luva-de-ouro.js");
                    modules.artilheiroCampeao = await import(
                        "./js/artilheiro-campeao.js"
                    );
                    modules.melhorMes = await import("./js/melhor-mes.js");
                    modules.top10 = await import("./js/top10.js");
                    modules.fluxoFinanceiro = await import(
                        "./js/fluxo-financeiro.js"
                    );
                } catch (error) {
                    console.error("Erro ao carregar m√≥dulos:", error);
                }
            }

            // Sistema de navega√ß√£o entre cards
            function initializeNavigation() {
                const cards = document.querySelectorAll(".module-card");
                const items = document.querySelectorAll(
                    ".module-items li[data-action]",
                );

                // Cards principais
                cards.forEach((card) => {
                    card.addEventListener("click", async (e) => {
                        if (processingModule) return;

                        // Feedback visual imediato
                        card.style.transform = "translateY(-1px) scale(0.98)";
                        setTimeout(() => {
                            card.style.transform = "";
                        }, 150);

                        const module = card.dataset.module;
                        if (module === "participantes") {
                            await showParticipantes();
                        } else {
                            // Para outros cards, mostrar submenu ou primeira a√ß√£o
                            const firstAction =
                                card.querySelector("li[data-action]");
                            if (firstAction) {
                                await executeAction(firstAction.dataset.action);
                            }
                        }
                    });
                });

                // Items espec√≠ficos
                items.forEach((item) => {
                    item.addEventListener("click", async (e) => {
                        e.stopPropagation();
                        if (processingModule) return;

                        // Feedback visual
                        item.style.opacity = "0.6";
                        setTimeout(() => {
                            item.style.opacity = "";
                        }, 150);

                        await executeAction(item.dataset.action);
                    });
                });
            }

            // Estados de loading
            function showLoading(text = "Processando dados...") {
                const overlay = document.getElementById("processing-overlay");
                const textEl = overlay.querySelector(".processing-text");
                textEl.textContent = text;
                overlay.classList.add("active");
            }

            function hideLoading() {
                const overlay = document.getElementById("processing-overlay");
                overlay.classList.remove("active");
            }

            // Executar a√ß√£o espec√≠fica
            async function executeAction(action) {
                if (processingModule) return;
                processingModule = true;

                try {
                    showLoading("Carregando m√≥dulo...");
                    showSecondaryScreen();

                    const contentArea = document.getElementById(
                        "dynamic-content-area",
                    );
                    contentArea.innerHTML =
                        '<div class="loading-state">Preparando conte√∫do...</div>';

                    switch (action) {
                        case "ranking-geral":
                            contentArea.innerHTML = `
                            <div id="ranking-geral">
                                <div id="rankingContainer">
                                    <div id="rankingGeralLoading" class="loading-state">Carregando ranking geral...</div>
                                    <div id="rankingGeralTableContainer" style="display: none;">
                                        <div id="rankingGeralExportBtnContainer" class="text-end mb-2"></div>
                                        <table class="ranking-table">
                                            <thead>
                                                <tr>
                                                    <th>Pos</th><th>‚ù§Ô∏è</th><th>Cartoleiro</th><th>Time</th><th>Pontos</th><th>M√©dia</th><th>Rodadas</th>
                                                </tr>
                                            </thead>
                                            <tbody id="rankingGeralTableBody"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        `;
                            if (modules.ranking?.carregarRankingGeral) {
                                await modules.ranking.carregarRankingGeral();
                            }
                            break;

                        case "rodadas":
                            contentArea.innerHTML = `
                            <div id="rodadas">
                                <div class="mb-3">
                                    <select id="rodadaSelect" class="form-control">
                                        <option value="">Escolha uma rodada</option>
                                    </select>
                                </div>
                                <div class="table-responsive">
                                    <table class="ranking-table">
                                        <thead>
                                            <tr><th>Pos</th><th>‚ù§Ô∏è</th><th>Cartoleiro</th><th>Time</th><th>Pontos</th><th>Banco</th></tr>
                                        </thead>
                                        <tbody id="rankingBody">
                                            <tr><td colspan="6" class="empty-state">Selecione uma rodada</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        `;
                            if (modules.rodadas?.carregarRodadas) {
                                await modules.rodadas.carregarRodadas();
                            }
                            break;

                        case "mata-mata":
                            contentArea.innerHTML =
                                '<div id="mataMataContent"><div class="loading-state">Carregando mata-mata...</div></div>';
                            if (modules.mataMata?.carregarMataMata) {
                                await modules.mataMata.carregarMataMata();
                            }
                            break;

                        case "pontos-corridos":
                            contentArea.innerHTML =
                                '<div id="pontosCorridosContent"><div class="loading-state">Carregando pontos corridos...</div></div>';
                            if (
                                modules.pontosCorreidos
                                    ?.inicializarPontosCorreidos
                            ) {
                                await modules.pontosCorreidos.inicializarPontosCorreidos();
                            }
                            break;

                        case "luva-de-ouro":
                            contentArea.innerHTML =
                                '<div id="luvaDeOuroContent"><div class="loading-state">Carregando luva de ouro...</div></div>';
                            if (modules.luvaDeOuro?.inicializarLuvaDeOuro) {
                                await modules.luvaDeOuro.inicializarLuvaDeOuro();
                            }
                            break;

                        case "artilheiro-campeao":
                            contentArea.innerHTML =
                                '<div id="artilheiroCampeaoContent"><div class="loading-state">Carregando artilheiro campe√£o...</div></div>';
                            if (
                                modules.artilheiroCampeao
                                    ?.inicializarArtilheiroCampeao
                            ) {
                                await modules.artilheiroCampeao.inicializarArtilheiroCampeao();
                            }
                            break;

                        case "melhor-mes":
                            contentArea.innerHTML =
                                '<div id="melhorMesContent"><div class="loading-state">Carregando melhor m√™s...</div></div>';
                            if (modules.melhorMes?.inicializarMelhorMes) {
                                await modules.melhorMes.inicializarMelhorMes();
                            }
                            break;

                        case "top10":
                            contentArea.innerHTML = `
                            <div id="top10">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div id="top10MitosExportBtnContainer" class="text-end mb-2"></div>
                                        <div id="top10MitosTable"></div>
                                    </div>
                                    <div class="col-md-6">
                                        <div id="top10MicosExportBtnContainer" class="text-end mb-2"></div>
                                        <div id="top10MicosTable"></div>
                                    </div>
                                </div>
                            </div>
                        `;
                            if (modules.top10?.inicializarTop10) {
                                await modules.top10.inicializarTop10();
                            }
                            break;

                        case "fluxo-financeiro":
                            contentArea.innerHTML =
                                '<div id="fluxoFinanceiroContent"><div class="loading-state">Carregando fluxo financeiro...</div></div>';
                            if (
                                modules.fluxoFinanceiro
                                    ?.inicializarFluxoFinanceiro
                            ) {
                                await modules.fluxoFinanceiro.inicializarFluxoFinanceiro();
                            }
                            break;

                        default:
                            contentArea.innerHTML =
                                '<div class="empty-state">Funcionalidade em desenvolvimento</div>';
                    }
                } catch (error) {
                    document.getElementById("dynamic-content-area").innerHTML =
                        `
                    <div class="empty-state">Erro: ${error.message}</div>
                `;
                } finally {
                    hideLoading();
                    processingModule = false;
                }
            }

            // Mostrar participantes
            async function showParticipantes() {
                if (processingModule) return;
                processingModule = true;

                try {
                    showLoading("Carregando participantes...");
                    showSecondaryScreen();

                    const contentArea = document.getElementById(
                        "dynamic-content-area",
                    );
                    contentArea.innerHTML =
                        '<div class="loading-state">Buscando dados dos participantes...</div>';

                    const urlParams = new URLSearchParams(
                        window.location.search,
                    );
                    const ligaId = urlParams.get("id");

                    if (!ligaId) {
                        contentArea.innerHTML =
                            '<div class="empty-state">ID da liga n√£o encontrado</div>';
                        return;
                    }

                    const response = await fetch(`/api/ligas/${ligaId}`);
                    if (!response.ok) {
                        throw new Error("Erro ao carregar liga");
                    }

                    const liga = await response.json();
                    if (!liga.times || liga.times.length === 0) {
                        contentArea.innerHTML =
                            '<div class="empty-state">Nenhum participante cadastrado</div>';
                        return;
                    }

                    let participantesHtml = `
                    <h4 style="color: #ffffff; margin-bottom: 15px;">
                        üë• Participantes da Liga (${liga.times.length})
                    </h4>
                    <div class="participantes-grid">
                `;

                    for (const timeId of liga.times) {
                        try {
                            const timeResponse = await fetch(
                                `/api/time/${timeId}`,
                            );
                            if (timeResponse.ok) {
                                const time = await timeResponse.json();
                                participantesHtml += `
                                <div class="participante-card">
                                    <img src="${time.url_escudo_png || "/escudos/default.png"}" 
                                         alt="Escudo" class="participante-escudo"
                                         onerror="this.src='/escudos/default.png'">
                                    <div class="participante-nome">${time.nome_cartoleiro || "N/A"}</div>
                                    <div class="participante-time">${time.nome_time || "Time N/A"}</div>
                                </div>
                            `;
                            }
                        } catch (error) {
                            console.warn(
                                `Erro ao carregar time ${timeId}:`,
                                error,
                            );
                        }
                    }

                    participantesHtml += "</div>";
                    contentArea.innerHTML = participantesHtml;
                } catch (error) {
                    document.getElementById("dynamic-content-area").innerHTML =
                        `
                    <div class="empty-state">Erro ao carregar participantes: ${error.message}</div>
                `;
                } finally {
                    hideLoading();
                    processingModule = false;
                }
            }

            // Navega√ß√£o entre telas
            function showSecondaryScreen() {
                document.getElementById("main-screen").style.display = "none";
                document
                    .getElementById("secondary-screen")
                    .classList.add("active");
            }

            function voltarParaCards() {
                document
                    .getElementById("secondary-screen")
                    .classList.remove("active");
                document.getElementById("main-screen").style.display = "block";
            }

            // Atualizar header da liga (sem redund√¢ncia)
            function updateLigaHeader(liga) {
                const nomeElement = document.getElementById("nomeLiga");
                const quantidadeElement =
                    document.getElementById("quantidadeTimes");

                if (nomeElement) {
                    // Remove "Liga:" e deixa apenas o nome limpo
                    nomeElement.textContent = liga.nome || "Nome da Liga";
                }

                if (quantidadeElement) {
                    const participantes =
                        liga.participantes?.length || liga.times?.length || 0;
                    quantidadeElement.textContent = `${participantes} participantes`;
                }
            }

            // Atualizar contador de participantes
            async function updateParticipantesCount() {
                try {
                    const urlParams = new URLSearchParams(
                        window.location.search,
                    );
                    const ligaId = urlParams.get("id");

                    if (!ligaId) return;

                    const response = await fetch(`/api/ligas/${ligaId}`);
                    if (response.ok) {
                        const liga = await response.json();

                        // Atualizar header da liga
                        updateLigaHeader(liga);

                        // Atualizar contador no card
                        const count =
                            liga.participantes?.length ||
                            liga.times?.length ||
                            0;
                        document.getElementById(
                            "participantes-count",
                        ).textContent = `${count} membros`;
                    }
                } catch (error) {
                    console.warn("Erro ao atualizar contador:", error);
                }
            }

            // Expor fun√ß√£o globalmente
            window.voltarParaCards = voltarParaCards;

            // Inicializa√ß√£o
            document.addEventListener("DOMContentLoaded", async function () {
                await loadLayout();
                await new Promise((resolve) => setTimeout(resolve, 500));
                await loadModules();
                await updateParticipantesCount();
                initializeNavigation();

                // Inicializar √≠cones Lucide
                if (typeof lucide !== "undefined") {
                    lucide.createIcons();
                }
            });
        </script>
    </body>
</html>
