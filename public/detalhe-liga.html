<!doctype html>
<html lang="pt-BR">
  <head>
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Liga - Super Cartola Manager</title>
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="stylesheet" href="style.css" />
    <!-- Adiciona html2canvas para exporta√ß√£o de imagem -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <!-- üéØ √çCONES PROFISSIONAIS: Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
      /* üéØ VARI√ÅVEIS CSS - Garantir disponibilidade local */
      :root {
        --laranja: #FF4500;
        --laranja-alpha: rgba(255, 69, 0, 0.15);
        --laranja-hover: rgba(255, 69, 0, 0.25);
        --bg-primary: #0a0a0a;
        --bg-secondary: #1a1a1a;
        --bg-tertiary: #2a2a2a;
        --bg-card: #1e1e1e;
        --bg-card-hover: #252525;
        --text-primary: #ffffff;
        --text-secondary: #e0e0e0;
        --text-muted: #a0a0a0;
        --success: #22c55e;
        --danger: #ef4444;
        --info: #3b82f6;
        --border-primary: #333333;
        --border-secondary: #2a2a2a;
        --shadow-sm: 0 2px 8px rgba(0,0,0,0.3);
        --shadow-md: 0 4px 16px rgba(0,0,0,0.4);
        --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
        --shadow-orange: 0 4px 20px rgba(255, 69, 0, 0.4);
        --gradient-primary: linear-gradient(135deg, var(--laranja) 0%, #E8472B 100%);
        --gradient-card: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%);
        --table-header-bg: var(--gradient-primary);
        --table-row-hover: rgba(255, 69, 0, 0.1);
      }

      /* === TEMA ESCURO SOBRESCREVENDO INLINE STYLES === */

      /* üéØ AJUSTE: App-main sem header */
      .app-main {
        margin-left: 280px;
        background: var(--bg-secondary);
        min-height: 100vh;
        padding: 20px; /* Padding direto no main */
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0; /* Remover padding extra */
        font-family:
          "Inter",
          -apple-system,
          BlinkMacSystemFont,
          sans-serif;
        background: var(--bg-secondary) !important;
        border-radius: 12px;
        box-shadow: var(--shadow-lg) !important;
        border: 1px solid var(--border-primary) !important;
        color: var(--text-primary) !important;
      }

      /* Headers escuros */
      h2,
      h3 {
        color: var(--text-primary) !important;
        text-align: center;
        margin-bottom: 15px;
      }

      h2 {
        color: var(--laranja) !important;
        text-shadow: 0 0 10px rgba(255, 69, 0, 0.3);
        font-size: 1.8rem;
      }

      /* === OP√á√ÉO B: NAVEGA√á√ÉO HIER√ÅRQUICA === */

      /* TELA PRINCIPAL - CARDS OVERVIEW */
      .main-screen {
        display: block;
        animation: fadeIn 0.4s ease-out;
      }

      .main-screen.hidden {
        display: none;
      }

      /* TELA SECUND√ÅRIA - NAVEGA√á√ÉO HIER√ÅRQUICA */
      .secondary-screen {
        display: none;
        animation: slideInRight 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .secondary-screen.active {
        display: block;
      }

      .secondary-header {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 20px 0;
        border-bottom: 2px solid var(--border-primary);
        margin-bottom: 32px;
      }

      .back-button {
        display: flex;
        align-items: center;
        gap: 8px;
        background: var(--bg-tertiary);
        border: 1px solid var(--border-primary);
        color: var(--text-secondary);
        padding: 10px 16px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        font-size: 14px;
        font-weight: 500;
      }

      .back-button:hover {
        background: var(--laranja-alpha);
        border-color: var(--laranja);
        color: var(--laranja);
        transform: translateX(-2px);
      }

      .back-icon {
        width: 16px;
        height: 16px;
        stroke: currentColor;
        stroke-width: 2.5;
      }

      .module-title {
        flex: 1;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .module-title h1 {
        font-size: 24px;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0;
      }

      .module-title .module-icon {
        width: 32px;
        height: 32px;
        stroke: var(--laranja);
        stroke-width: 2.5;
      }

      .module-subtitle {
        font-size: 14px;
        color: var(--text-muted);
        margin: 8px 0 0 44px;
        font-weight: 500;
      }

      /* SE√á√ïES DE SUB-M√ìDULOS */
      .sub-modules-section {
        margin-bottom: 40px;
      }

      .section-title {
        font-size: 16px;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0 0 20px 0;
        padding-left: 8px;
        border-left: 4px solid var(--laranja);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .section-icon {
        width: 20px;
        height: 20px;
        stroke: var(--laranja);
        stroke-width: 2.5;
      }

      .sub-modules-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
      }

      /* SUB-M√ìDULO CARDS */
      .sub-module-card {
        background: var(--gradient-card);
        border: 1px solid var(--border-primary);
        border-radius: 12px;
        padding: 20px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .sub-module-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--gradient-primary);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .sub-module-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 32px rgba(0,0,0,0.4);
        border-color: rgba(255, 69, 0, 0.3);
      }

      .sub-module-card:hover::before {
        opacity: 1;
      }

      .sub-card-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 12px;
      }

      .sub-card-icon {
        width: 36px;
        height: 36px;
        background: rgba(255, 69, 0, 0.1);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid rgba(255, 69, 0, 0.2);
      }

      .sub-card-icon i {
        width: 20px;
        height: 20px;
        stroke: var(--laranja);
        stroke-width: 2.5;
      }

      .sub-card-title {
        font-size: 16px;
        font-weight: 600;
        color: var(--text-primary);
        margin: 0;
      }

      .sub-card-description {
        font-size: 13px;
        color: var(--text-secondary);
        line-height: 1.4;
        margin: 0;
      }

      .sub-card-meta {
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1px solid var(--border-secondary);
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .sub-card-status {
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .status-ready { color: var(--success); }
      .status-active { color: var(--laranja); }
      .status-warning { color: #f59e0b; }

      .sub-card-shortcut {
        font-size: 11px;
        color: var(--text-muted);
        background: var(--bg-tertiary);
        padding: 4px 8px;
        border-radius: 4px;
        border: 1px solid var(--border-secondary);
      }

      /* ANIMA√á√ïES */
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }

      @keyframes slideInRight {
        from { opacity: 0; transform: translateX(30px); }
        to { opacity: 1; transform: translateX(0); }
      }

      @keyframes slideOutLeft {
        from { opacity: 1; transform: translateX(0); }
        to { opacity: 0; transform: translateX(-30px); }
      }

      /* RESPONSIVIDADE HIER√ÅRQUICA */
      @media (max-width: 768px) {
        .secondary-header {
          padding: 16px 0;
          margin-bottom: 24px;
        }

        .module-title h1 {
          font-size: 20px;
        }

        .module-subtitle {
          margin-left: 36px;
        }

        .sub-modules-grid {
          grid-template-columns: 1fr;
          gap: 16px;
        }

        .sub-module-card {
          padding: 16px;
        }
      }

      @media (max-width: 480px) {
        .back-button {
          padding: 8px 12px;
          font-size: 13px;
        }

        .module-title h1 {
          font-size: 18px;
        }

        .module-title .module-icon {
          width: 28px;
          height: 28px;
        }
      }

      .modules-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 24px;
        margin: 24px 0;
        padding: 0;
      }

      .module-card {
        background: var(--gradient-card);
        border: 1px solid var(--border-primary);
        border-radius: 16px;
        padding: 24px;
        position: relative;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
      }

      .module-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--gradient-primary);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .module-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 48px rgba(0,0,0,0.4);
        border-color: rgba(255, 69, 0, 0.3);
      }

      .module-card:hover::before {
        opacity: 1;
      }

      /* HEADER DO CART√ÉO */
      .card-header {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        margin-bottom: 20px;
      }

      .card-icon {
        width: 48px;
        height: 48px;
        background: rgba(255, 69, 0, 0.1);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid rgba(255, 69, 0, 0.2);
      }

      .icon-primary {
        width: 24px;
        height: 24px;
        stroke: var(--laranja);
        stroke-width: 2.5;
      }

      .card-status {
        position: relative;
      }

      .status-badge {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .status-ready {
        background: rgba(34, 197, 94, 0.15);
        color: var(--success);
        border: 1px solid rgba(34, 197, 94, 0.2);
      }

      .status-active {
        background: rgba(255, 69, 0, 0.15);
        color: var(--laranja);
        border: 1px solid rgba(255, 69, 0, 0.2);
      }

      .status-warning {
        background: rgba(245, 158, 11, 0.15);
        color: #f59e0b;
        border: 1px solid rgba(245, 158, 11, 0.2);
      }

      /* BODY DO CART√ÉO */
      .card-body {
        margin-bottom: 24px;
      }

      .card-title {
        font-size: 18px;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0 0 12px 0;
        letter-spacing: 0.3px;
      }

      .card-stats {
        display: flex;
        align-items: baseline;
        gap: 8px;
        margin-bottom: 12px;
      }

      .stat-number {
        font-size: 24px;
        font-weight: 800;
        color: var(--laranja);
        line-height: 1;
        font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
      }

      .stat-label {
        font-size: 12px;
        font-weight: 500;
        color: var(--text-muted);
        text-transform: lowercase;
      }

      .card-description {
        font-size: 13px;
        color: var(--text-secondary);
        line-height: 1.4;
        margin: 0;
      }

      /* ACTIONS DO CART√ÉO */
      .card-actions {
        display: flex;
        gap: 12px;
        align-items: center;
      }

      .btn-primary {
        flex: 1;
        background: var(--gradient-primary);
        color: var(--text-primary);
        border: none;
        padding: 12px 20px;
        border-radius: 10px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
        justify-content: center;
        box-shadow: 0 4px 16px rgba(255, 69, 0, 0.2);
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 32px rgba(255, 69, 0, 0.4);
        filter: brightness(1.1);
      }

      .btn-secondary {
        width: 44px;
        height: 44px;
        background: var(--bg-tertiary);
        border: 1px solid var(--border-primary);
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .btn-secondary:hover {
        background: var(--laranja-alpha);
        border-color: var(--laranja);
        transform: translateY(-1px);
      }

      .btn-icon {
        width: 16px;
        height: 16px;
        stroke: currentColor;
        stroke-width: 2.5;
      }

      .btn-secondary .btn-icon {
        stroke: var(--text-muted);
      }

      .btn-secondary:hover .btn-icon {
        stroke: var(--laranja);
      }

      /* √ÅREA DE CONTE√öDO DIN√ÇMICO */
      .dynamic-content {
        background: var(--bg-card);
        border: 1px solid var(--border-primary);
        border-radius: 16px;
        min-height: 400px;
        position: relative;
        overflow: hidden;
      }

      .content-header {
        padding: 24px 24px 0 24px;
        border-bottom: 1px solid var(--border-primary);
        margin-bottom: 24px;
      }

      .content-title {
        font-size: 20px;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0 0 8px 0;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .content-icon {
        width: 24px;
        height: 24px;
        stroke: var(--laranja);
        stroke-width: 2.5;
      }

      .content-subtitle {
        font-size: 14px;
        color: var(--text-muted);
        margin: 0 0 24px 0;
      }

      .content-body {
        padding: 0 24px 24px 24px;
      }

      /* LOADING PERSONALIZADO PARA M√ìDULOS */
      .content-body .loading-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 200px;
        gap: 20px;
      }

      .content-body .loading-container .loading-spinner {
        width: 48px;
        height: 48px;
        border: 4px solid var(--laranja-alpha);
        border-top: 4px solid var(--laranja);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      .content-body .loading-container p {
        color: var(--text-muted);
        font-size: 14px;
        margin: 0;
      }

      /* RESPONSIVIDADE PARA CART√ïES */
      @media (max-width: 768px) {
        .modules-grid {
          grid-template-columns: 1fr;
          gap: 16px;
          margin: 16px 0;
        }

        .module-card {
          padding: 20px;
        }

        .card-title {
          font-size: 16px;
        }

        .stat-number {
          font-size: 20px;
        }

        .btn-primary {
          padding: 10px 16px;
          font-size: 12px;
        }
      }

      @media (max-width: 480px) {
        .modules-grid {
          gap: 12px;
        }

        .module-card {
          padding: 16px;
        }

        .card-actions {
          flex-direction: column;
          gap: 8px;
        }

        .btn-primary {
          width: 100%;
        }
      }
      .tabs {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        margin: 20px 0;
        gap: 5px;
        padding: 8px;
        background: var(--bg-card) !important;
        border-radius: 12px;
        box-shadow: var(--shadow-sm);
        border: 1px solid var(--border-primary);
      }

      .tab {
        padding: 12px 16px !important;
        border: none !important;
        background: transparent !important;
        color: var(--text-muted) !important;
        cursor: pointer;
        border-radius: 8px !important;
        font-size: 13px !important;
        font-weight: 500 !important;
        transition: all 0.3s ease !important;
        display: flex;
        align-items: center;
        gap: 6px;
        text-transform: none;
        letter-spacing: 0.3px;
      }

      .tab:hover {
        background: var(--laranja-alpha) !important;
        color: var(--laranja) !important;
        transform: translateY(-1px);
      }

      .tab.active {
        background: var(--gradient-primary) !important;
        color: var(--text-primary) !important;
        font-weight: 600 !important;
        box-shadow: var(--shadow-orange) !important;
      }

      .tab span {
        font-size: 1.1em;
      }

      /* Tab content escuro */
      .tab-content {
        display: none;
        padding: 25px !important;
        border: 1px solid var(--border-primary) !important;
        border-radius: 12px !important;
        margin-top: 15px;
        background: var(--bg-card) !important;
        box-shadow: var(--shadow-md) !important;
        color: var(--text-primary) !important;
      }

      .tab-content.active {
        display: block;
        animation: fadeInUp 0.3s ease-out;
      }

      /* Alertas escuros */
      .alert {
        padding: 15px !important;
        border-radius: 8px !important;
        margin: 15px 0 !important;
        font-weight: 500;
        font-size: 13px;
        border: 1px solid transparent;
      }

      .alert-success {
        background: rgba(34, 197, 94, 0.2) !important;
        border-color: var(--success) !important;
        color: var(--success) !important;
      }

      .alert-warning {
        background: rgba(255, 69, 0, 0.2) !important;
        border-color: var(--laranja) !important;
        color: var(--laranja) !important;
      }

      .alert-error,
      .error-message {
        background: rgba(239, 68, 68, 0.2) !important;
        border-color: var(--danger) !important;
        color: var(--danger) !important;
      }

      .alert-info {
        background: rgba(59, 130, 246, 0.2) !important;
        border-color: var(--info) !important;
        color: var(--info) !important;
      }

      /* Loading escuro */
      .loading-spinner {
        display: inline-block;
        width: 40px;
        height: 40px;
        border: 4px solid var(--laranja-alpha) !important;
        border-top: 4px solid var(--laranja) !important;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      .loading-container {
        text-align: center;
        padding: 40px 20px;
        color: var(--text-muted) !important;
        background: var(--bg-card) !important;
        border-radius: 12px;
        border: 1px solid var(--border-primary);
      }

      /* Bot√µes escuros */
      .carregar-participantes-btn,
      .toggle-participants,
      .refresh-btn,
      .parciais-btn {
        background: var(--gradient-primary) !important;
        color: var(--text-primary) !important;
        border: none !important;
        padding: 12px 20px !important;
        border-radius: 8px !important;
        font-size: 14px !important;
        font-weight: 600 !important;
        cursor: pointer !important;
        transition: all 0.3s ease !important;
        box-shadow: var(--shadow-orange) !important;
      }

      .carregar-participantes-btn:hover,
      .toggle-participants:hover,
      .refresh-btn:hover,
      .parciais-btn:hover {
        transform: translateY(-2px) !important;
        box-shadow: var(--shadow-lg) !important;
        filter: brightness(1.1);
      }

      .carregar-participantes-btn:disabled {
        background: var(--text-muted) !important;
        cursor: not-allowed !important;
        transform: none !important;
        opacity: 0.6;
      }

      /* Select escuro */
      .rodadas-select {
        padding: 12px 16px !important;
        border: 1px solid var(--border-primary) !important;
        border-radius: 8px !important;
        font-size: 14px !important;
        min-width: 250px;
        background: var(--bg-card) !important;
        color: var(--text-primary) !important;
        outline: none;
        transition: all 0.3s ease;
      }

      .rodadas-select:focus {
        border-color: var(--laranja) !important;
        box-shadow: 0 0 0 3px var(--laranja-alpha) !important;
      }

      /* Actions container */
      .rodadas-actions {
        display: flex;
        gap: 15px !important;
        margin-bottom: 20px !important;
        align-items: center;
        padding: 15px;
        background: var(--bg-tertiary);
        border-radius: 8px;
        border: 1px solid var(--border-primary);
      }

      /* Participantes inicial escuro */
      .participantes-inicial {
        text-align: center !important;
        padding: 50px 30px !important;
        color: var(--text-muted) !important;
        background: var(--bg-card) !important;
        border-radius: 12px;
        border: 2px dashed var(--border-primary);
      }

      .participantes-inicial h3 {
        color: var(--laranja) !important;
        margin-bottom: 15px !important;
      }

      /* Tabelas escuras */
      .ranking-table {
        width: 100% !important;
        border-collapse: collapse !important;
        margin-top: 20px !important;
        background: var(--bg-card) !important;
        border-radius: 8px !important;
        overflow: hidden !important;
        box-shadow: var(--shadow-md) !important;
        border: 1px solid var(--border-primary) !important;
      }

      .ranking-table th,
      .ranking-table td {
        border: 1px solid var(--border-secondary) !important;
        padding: 10px 8px !important;
        text-align: left !important;
        color: var(--text-secondary) !important;
        font-size: 13px !important;
      }

      .ranking-table th {
        background: var(--table-header-bg) !important;
        color: var(--text-primary) !important;
        font-weight: 600 !important;
        text-transform: uppercase !important;
        font-size: 12px !important;
        letter-spacing: 0.5px !important;
      }

      .ranking-table tbody tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.02) !important;
      }

      .ranking-table tbody tr:hover {
        background: var(--table-row-hover) !important;
      }

      /* Grid de times escuro */
      .times-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)) !important;
        gap: 20px !important;
        margin-top: 20px;
      }

      .time-card {
        border: 1px solid var(--border-primary) !important;
        border-radius: 12px !important;
        padding: 20px !important;
        text-align: center !important;
        background: var(--gradient-card) !important;
        box-shadow: var(--shadow-md) !important;
        transition: all 0.3s ease !important;
        color: var(--text-primary) !important;
      }

      .time-card:hover {
        transform: translateY(-5px) !important;
        box-shadow: var(--shadow-lg) !important;
        border-color: var(--laranja) !important;
      }

      .time-card img {
        width: 60px !important;
        height: 60px !important;
        border-radius: 50% !important;
        margin-bottom: 15px !important;
        object-fit: cover !important;
        border: 2px solid var(--border-primary);
        transition: all 0.3s ease;
      }

      .time-card:hover img {
        border-color: var(--laranja);
        box-shadow: 0 0 15px rgba(255, 69, 0, 0.4);
      }

      .time-card h4 {
        margin-bottom: 8px !important;
        color: var(--text-primary) !important;
        font-size: 1.1em !important;
        font-weight: 600;
      }

      .time-card p {
        font-size: 0.9em !important;
        color: var(--text-muted) !important;
        margin: 0;
      }

      /* Debug panel escuro - ajustado para nova estrutura */
      #debug-panel {
        position: fixed !important;
        top: 10px !important;
        right: 10px !important;
        background: rgba(0, 0, 0, 0.9) !important;
        color: var(--text-primary) !important;
        padding: 15px !important;
        border-radius: 8px !important;
        font-family: "JetBrains Mono", monospace !important;
        font-size: 11px !important;
        max-width: 320px !important;
        z-index: 1001 !important;
        border: 1px solid var(--laranja) !important;
        box-shadow: var(--shadow-orange) !important;
      }

      /* Highlights escuros */
      .mito-highlight {
        background: rgba(34, 197, 94, 0.3) !important;
        color: var(--success) !important;
        font-weight: bold !important;
        border-radius: 4px;
        padding: 2px 4px;
      }

      .mico-highlight {
        background: rgba(239, 68, 68, 0.3) !important;
        color: var(--danger) !important;
        font-style: italic !important;
        border-radius: 4px;
        padding: 2px 4px;
      }

      /* Tabela artilheiro (mant√©m especificidades) */
      #tabela-artilheiro-rodada table.ranking-table th,
      #tabela-artilheiro-rodada table.ranking-table td {
        padding: 2px 3px !important;
        font-size: 9px !important;
      }

      #tabela-artilheiro-rodada table.ranking-table th:nth-child(3),
      #tabela-artilheiro-rodada table.ranking-table td:nth-child(3) {
        max-width: 50px !important;
        width: 50px !important;
        padding: 2px 2px !important;
      }

      #tabela-artilheiro-rodada table.ranking-table th:nth-child(4),
      #tabela-artilheiro-rodada table.ranking-table td:nth-child(4) {
        max-width: 50px !important;
        width: 50px !important;
        padding: 2px 2px !important;
      }

      #tabela-artilheiro-rodada table.ranking-table th:nth-child(1),
      #tabela-artilheiro-rodada table.ranking-table td:nth-child(1) {
        width: 20px !important;
        padding: 2px 1px !important;
      }

      #tabela-artilheiro-rodada table.ranking-table th:nth-child(2),
      #tabela-artilheiro-rodada table.ranking-table td:nth-child(2) {
        width: 20px !important;
        padding: 2px 1px !important;
      }

      #tabela-artilheiro-rodada table.ranking-table th:nth-child(5),
      #tabela-artilheiro-rodada table.ranking-table td:nth-child(5),
      #tabela-artilheiro-rodada table.ranking-table th:nth-child(6),
      #tabela-artilheiro-rodada table.ranking-table td:nth-child(6),
      #tabela-artilheiro-rodada table.ranking-table th:nth-child(7),
      #tabela-artilheiro-rodada table.ranking-table td:nth-child(7) {
        width: 25px !important;
        padding: 2px 1px !important;
      }

      #tabela-artilheiro-rodada img {
        width: 12px !important;
        height: 12px !important;
      }

      #tabela-artilheiro-rodada table.ranking-table {
        font-size: 9px !important;
        width: auto !important;
        max-width: 400px !important;
      }

      /* Rodadas espec√≠ficas */
      #rodadas table.ranking-table th:nth-child(1),
      #rodadas table.ranking-table td:nth-child(1) {
        text-align: center !important;
      }

      #rodadas table.ranking-table th:nth-child(5),
      #rodadas table.ranking-table td:nth-child(5) {
        text-align: center !important;
      }

      #rodadas table.ranking-table th:nth-child(6),
      #rodadas table.ranking-table td:nth-child(6) {
        text-align: center !important;
      }

      /* Global loading - ajustado para nova estrutura sem header */
      #global-loading {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: 100% !important;
        height: 100% !important;
        background: rgba(10, 10, 10, 0.95) !important;
        flex-direction: column !important;
        align-items: center !important;
        justify-content: center !important;
        z-index: 9999 !important;
        color: var(--text-primary) !important;
      }

      #global-loading.show {
        display: flex !important;
      }

      #global-loading.hide {
        display: none !important;
      }

      #global-loading .loading-spinner {
        width: 60px !important;
        height: 60px !important;
        border-width: 6px !important;
        margin-bottom: 20px;
      }

      /* Anima√ß√µes */
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(15px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Responsividade */
      @media (max-width: 768px) {
        /* üéØ AJUSTE: Mobile sem header */
        .app-main {
          margin-left: 0;
          padding: 10px; /* Padding reduzido para mobile */
        }

        .container {
          padding: 0 !important; /* Container sem padding extra em mobile */
          margin: 0 !important;
        }

        .tabs {
          gap: 3px !important;
          padding: 6px !important;
        }

        .tab {
          padding: 10px 12px !important;
          font-size: 12px !important;
        }

        .tab-content {
          padding: 20px 15px !important;
        }

        .times-grid {
          grid-template-columns: repeat(
            auto-fill,
            minmax(150px, 1fr)
          ) !important;
          gap: 15px !important;
        }

        .rodadas-actions {
          flex-direction: column !important;
          gap: 10px !important;
        }

        .rodadas-select {
          min-width: 200px !important;
        }
      }

      @media (max-width: 480px) {
        /* üéØ AJUSTE: Telas muito pequenas */
        .app-main {
          padding: 5px; /* Padding m√≠nimo */
        }

        h2 {
          font-size: 1.5rem !important;
        }

        .tab {
          padding: 8px 10px !important;
          font-size: 11px !important;
        }

        .times-grid {
          grid-template-columns: 1fr !important;
        }
      }
    </style>
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar ser√° injetado aqui -->
      <div id="sidebar-placeholder"></div>

      <!-- Conte√∫do principal -->
      <main class="app-main">
        <!-- üéØ INTERFACE LIMPA - Apenas conte√∫do essencial -->

        <div id="debug-panel" style="display: none">
          <strong>Status dos M√≥dulos:</strong>
          <div id="debug-content"></div>
        </div>

        <div id="global-loading" class="hide">
          <div class="loading-spinner"></div>
          <p>Inicializando aplica√ß√£o...</p>
        </div>

        <div class="container">
            <!-- üéØ SE√á√ÉO REMOVIDA: Breadcrumb e cabe√ßalho completos -->
            <!-- OP√á√ÉO C: Interface Tipo Cart√µes Profissionais -->

            <!-- üéØ GRID DE CART√ïES PRINCIPAIS -->
            <div class="modules-grid">
              <div class="module-card" data-module="participantes" data-status="ready">
                <div class="card-header">
                  <div class="card-icon">
                    <i data-lucide="users" class="icon-primary"></i>
                  </div>
                  <div class="card-status">
                    <span class="status-badge status-ready">Ativo</span>
                  </div>
                </div>
                <div class="card-body">
                  <h3 class="card-title">Participantes</h3>
                  <div class="card-stats">
                    <span class="stat-number" id="participantes-count">--</span>
                    <span class="stat-label">membros ativos</span>
                  </div>
                  <p class="card-description">Gest√£o completa dos times da liga</p>
                </div>
                <div class="card-actions">
                  <button class="btn-primary" data-action="participantes">
                    <i data-lucide="eye" class="btn-icon"></i>
                    Visualizar
                  </button>
                  <button class="btn-secondary" data-action="participantes-export">
                    <i data-lucide="download" class="btn-icon"></i>
                  </button>
                </div>
              </div>

              <div class="module-card" data-module="rodadas" data-status="active">
                <div class="card-header">
                  <div class="card-icon">
                    <i data-lucide="bar-chart-3" class="icon-primary"></i>
                  </div>
                  <div class="card-status">
                    <span class="status-badge status-active">R38 Atual</span>
                  </div>
                </div>
                <div class="card-body">
                  <h3 class="card-title">Rodadas</h3>
                  <div class="card-stats">
                    <span class="stat-number" id="rodadas-count">38</span>
                    <span class="stat-label">rodadas processadas</span>
                  </div>
                  <p class="card-description">An√°lise detalhada por rodada</p>
                </div>
                <div class="card-actions">
                  <button class="btn-primary" data-action="rodadas">
                    <i data-lucide="trending-up" class="btn-icon"></i>
                    Analisar
                  </button>
                  <button class="btn-secondary" data-action="rodadas-parciais">
                    <i data-lucide="activity" class="btn-icon"></i>
                  </button>
                </div>
              </div>

              <div class="module-card" data-module="rankings" data-status="ready">
                <div class="card-header">
                  <div class="card-icon">
                    <i data-lucide="trophy" class="icon-primary"></i>
                  </div>
                  <div class="card-status">
                    <span class="status-badge status-ready">5 Formatos</span>
                  </div>
                </div>
                <div class="card-body">
                  <h3 class="card-title">Rankings</h3>
                  <div class="card-stats">
                    <span class="stat-number">TOP</span>
                    <span class="stat-label">classifica√ß√µes</span>
                  </div>
                  <p class="card-description">Ranking Geral ‚Ä¢ Top 10 ‚Ä¢ Melhor do M√™s</p>
                </div>
                <div class="card-actions">
                  <button class="btn-primary" data-action="ranking-geral">
                    <i data-lucide="award" class="btn-icon"></i>
                    Rankings
                  </button>
                  <button class="btn-secondary" data-action="top-10">
                    <i data-lucide="flame" class="btn-icon"></i>
                  </button>
                </div>
              </div>

              <div class="module-card" data-module="competicoes" data-status="active">
                <div class="card-header">
                  <div class="card-icon">
                    <i data-lucide="swords" class="icon-primary"></i>
                  </div>
                  <div class="card-status">
                    <span class="status-badge status-active">Em Disputa</span>
                  </div>
                </div>
                <div class="card-body">
                  <h3 class="card-title">Competi√ß√µes</h3>
                  <div class="card-stats">
                    <span class="stat-number">2</span>
                    <span class="stat-label">modalidades ativas</span>
                  </div>
                  <p class="card-description">Mata-Mata ‚Ä¢ Pontos Corridos</p>
                </div>
                <div class="card-actions">
                  <button class="btn-primary" data-action="mata-mata">
                    <i data-lucide="target" class="btn-icon"></i>
                    Disputas
                  </button>
                  <button class="btn-secondary" data-action="pontos-corridos">
                    <i data-lucide="trending-up" class="btn-icon"></i>
                  </button>
                </div>
              </div>

              <div class="module-card" data-module="financeiro" data-status="warning">
                <div class="card-header">
                  <div class="card-icon">
                    <i data-lucide="dollar-sign" class="icon-primary"></i>
                  </div>
                  <div class="card-status">
                    <span class="status-badge status-warning">R$ 2.8K</span>
                  </div>
                </div>
                <div class="card-body">
                  <h3 class="card-title">Financeiro</h3>
                  <div class="card-stats">
                    <span class="stat-number" id="financeiro-total">R$ --</span>
                    <span class="stat-label">total movimentado</span>
                  </div>
                  <p class="card-description">Controle completo de receitas/despesas</p>
                </div>
                <div class="card-actions">
                  <button class="btn-primary" data-action="fluxo-financeiro">
                    <i data-lucide="calculator" class="btn-icon"></i>
                    Fluxo
                  </button>
                  <button class="btn-secondary" data-action="financeiro-export">
                    <i data-lucide="file-text" class="btn-icon"></i>
                  </button>
                </div>
              </div>

              <div class="module-card" data-module="especialistas" data-status="ready">
                <div class="card-header">
                  <div class="card-icon">
                    <i data-lucide="medal" class="icon-primary"></i>
                  </div>
                  <div class="card-status">
                    <span class="status-badge status-ready">Especialistas</span>
                  </div>
                </div>
                <div class="card-body">
                  <h3 class="card-title">Especialistas</h3>
                  <div class="card-stats">
                    <span class="stat-number">2</span>
                    <span class="stat-label">modalidades ativas</span>
                  </div>
                  <p class="card-description">Artilheiro Campe√£o ‚Ä¢ Luva de Ouro</p>
                </div>
                <div class="card-actions">
                  <button class="btn-primary" data-action="artilheiro-campeao">
                    <i data-lucide="zap" class="btn-icon"></i>
                    Artilheiro
                  </button>
                  <button class="btn-secondary" data-action="luva-de-ouro">
                    <i data-lucide="shield" class="btn-icon"></i>
                  </button>
                </div>
              </div>
            </div>

            <!-- üéØ √ÅREA DE CONTE√öDO DIN√ÇMICO -->

            <!-- üéØ √ÅREA DE CONTE√öDO DIN√ÇMICO -->
            <div class="dynamic-content" id="dynamic-content" style="display: none;">
              <div class="content-header">
                <h2 class="content-title" id="content-title">
                  <i data-lucide="users" class="content-icon"></i>
                  M√≥dulo
                </h2>
                <p class="content-subtitle" id="content-subtitle">Carregando...</p>
              </div>
              <div class="content-body" id="content-body">
                <!-- Conte√∫do ser√° injetado aqui dinamicamente -->
              </div>
            </div>

            <div
              id="errorMessage"
              class="error-message"
              style="display: none"
            ></div>

            <!-- CONTAINERS ORIGINAIS MANTIDOS PARA COMPATIBILIDADE -->

            <div class="tab-contents">
              <div id="participantes" class="tab-content active">
                <div id="participantes-inicial" class="participantes-inicial">
                  <h3>üë• Participantes da Liga</h3>
                  <p>
                    Clique no bot√£o abaixo para carregar e visualizar os
                    participantes da liga.
                  </p>
                  <button
                    id="carregarParticipantesBtn"
                    class="carregar-participantes-btn"
                  >
                    üî• Carregar Participantes
                  </button>
                </div>
                <div
                  id="participantes-loading"
                  class="loading-container"
                  style="display: none"
                >
                  <div class="loading-spinner"></div>
                  <p>Carregando participantes...</p>
                </div>
                <button
                  class="toggle-participants"
                  type="button"
                  style="display: none"
                >
                  Exibir Participantes
                </button>
                <div
                  id="timesContainer"
                  class="times-container"
                  style="display: none"
                >
                  <div class="times-grid"></div>
                </div>
              </div>

              <div id="rodadas" class="tab-content">
                <div class="rodadas-header">
                  <div class="rodadas-actions">
                    <select id="rodadaSelect" class="rodadas-select">
                      <option value="">Escolha uma rodada</option>
                    </select>
                    <button class="refresh-btn" id="refreshApiBtn">
                      Atualizar dados da API
                    </button>
                    <button id="parciaisBtn" class="parciais-btn" type="button">
                      Parciais
                    </button>
                  </div>
                </div>
                <div id="rodadasExportBtnContainer"></div>
                <div id="loading" style="display: none">Carregando...</div>
                <table id="rankingTable" class="ranking-table">
                  <thead>
                    <tr>
                      <th style="width: 36px; text-align: center">Pos</th>
                      <th style="width: 40px; text-align: center">‚ù§Ô∏è</th>
                      <th style="min-width: 110px; text-align: left">
                        Cartoleiro
                      </th>
                      <th style="min-width: 110px; text-align: left">
                        Time Cartoleiro
                      </th>
                      <th style="width: 48px; text-align: center">Pts</th>
                      <th style="width: 60px; text-align: center">Banco</th>
                    </tr>
                  </thead>
                  <tbody id="rankingBody"></tbody>
                </table>
              </div>

              <div id="mata-mata" class="tab-content">
                <div class="loading-container">
                  <div class="loading-spinner"></div>
                  <p>Carregando disputas mata-mata...</p>
                </div>
              </div>

              <div id="ranking-geral" class="tab-content">
                <div class="loading-container">
                  <div class="loading-spinner"></div>
                  <p>Calculando ranking geral...</p>
                </div>
              </div>

              <div id="pontos-corridos" class="tab-content">
                <div id="pontosCorridosSelect"></div>
                <div id="pontosCorridosRodada"></div>
              </div>

              <div id="melhor-mes" class="tab-content">
                <div id="melhorMesSelect"></div>
                <div id="melhorMesTabela"></div>
              </div>

              <div id="top-10" class="tab-content">
                <div
                  id="top10MitosExportBtnContainer"
                  style="text-align: right; margin-bottom: 8px"
                ></div>
                <div id="top10MitosTable"></div>
                <div style="height: 20px"></div>
                <div
                  id="top10MicosExportBtnContainer"
                  style="text-align: right; margin-bottom: 8px"
                ></div>
                <div id="top10MicosTable"></div>
              </div>

              <div id="fluxo-financeiro" class="tab-content">
                <div
                  id="fluxoFinanceiroButtons"
                  class="participantes-buttons-container"
                ></div>
                <div
                  id="fluxoFinanceiroExportBtnContainer"
                  style="text-align: right; margin-bottom: 8px"
                ></div>
                <div id="fluxoFinanceiroContent"></div>
              </div>

              <div id="artilheiro-campeao" class="tab-content">
                <div id="artilheiro-loading" class="loading-container">
                  <div class="loading-spinner"></div>
                  <p>Carregando dados do artilheiro campe√£o...</p>
                </div>
                <div id="artilheiro-container" style="display: none"></div>
              </div>

              <div id="luva-de-ouro" class="tab-content">
                <div
                  id="luvaDeOuroExportBtnContainer"
                  style="text-align: right; margin-bottom: 8px"
                ></div>
                <div id="luvaDeOuroContent"></div>
              </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script type="module">
      console.log("üöÄ Iniciando carregamento da aplica√ß√£o...");

      // === INTEGRA√á√ÉO COM LAYOUT.HTML ===
      async function loadLayout() {
        try {
          console.log("üì¶ Carregando layout.html...");
          const response = await fetch("layout.html");
          const layoutHtml = await response.text();

          // Parse do HTML
          const parser = new DOMParser();
          const doc = parser.parseFromString(layoutHtml, "text/html");

          // Injetar sidebar
          const sidebar = doc.querySelector(".app-sidebar");
          if (sidebar) {
            document.getElementById("sidebar-placeholder").replaceWith(sidebar);
            console.log("‚úÖ Sidebar injetado");
          }

          // ‚úÖ FUN√á√ÉO DE FALLBACK - Interface b√°sica sem navega√ß√£o hier√°rquica
          function showBasicInterface() {
            console.log("üîß Ativando interface b√°sica de fallback...");

            const container = document.querySelector('.container');
            if (!container) return;

            // Garantir que a grid de m√≥dulos seja vis√≠vel e funcional
            const modulesGrid = container.querySelector('.modules-grid');
            if (modulesGrid) {
              modulesGrid.style.display = 'grid';

              // Event listeners b√°sicos para os cards
              modulesGrid.addEventListener('click', (e) => {
                const btn = e.target.closest('[data-navigate]');
                if (btn) {
                  const moduleAction = btn.dataset.navigate;
                  console.log(`üéØ Execu√ß√£o direta do m√≥dulo: ${moduleAction}`);
                  executarAcaoModulo(moduleAction);
                }
              });

              console.log("‚úÖ Interface b√°sica ativada com event listeners");
            }
          }

          // üéØ HEADER REMOVIDO - N√£o injetar header para interface limpa
          // Remove qualquer elemento de header que possa existir
          const existingHeaders = document.querySelectorAll('.page-header, .app-header, .header-content');
          existingHeaders.forEach(header => {
            console.log("üóëÔ∏è Removendo header existente");
            header.remove();
          });

          // ‚úÖ FUN√á√ïES DE COMPATIBILIDADE DO LAYOUT.HTML
          // Evitar erros de fun√ß√µes n√£o definidas vindas do layout injetado
          window.logoCarregada = function(img) {
            console.log("üéØ Logo carregada com sucesso");
            if (img) img.style.display = "block";
            const fallback = document.getElementById("logoFallback");
            if (fallback) fallback.style.display = "none";
          };

          window.tentarProximoCaminho = function(img) {
            console.log("‚ö†Ô∏è Erro ao carregar logo, tentando fallback");
            if (img) img.style.display = "none";
            const fallback = document.getElementById("logoFallback");
            if (fallback) fallback.style.display = "inline-block";
          };

          window.goToDashboard = function() {
            window.location.href = "dashboard.html";
          };

          // Atualizar t√≠tulo da p√°gina para refletir a liga espec√≠fica
          try {
            const urlParams = new URLSearchParams(window.location.search);
            const ligaId = urlParams.get("id");
            if (ligaId) {
              const response = await fetch(`/api/ligas/${ligaId}`);
              if (response.ok) {
                const liga = await response.json();
                if (liga?.nome) {
                  document.title = `${liga.nome} - Super Cartola Manager`;
                }
              }
            }
          } catch (error) {
            console.log("‚ÑπÔ∏è N√£o foi poss√≠vel atualizar t√≠tulo da p√°gina");
          }

          // Executar scripts do layout
          const scripts = doc.querySelectorAll("script");
          scripts.forEach((script) => {
            if (script.textContent.trim()) {
              const newScript = document.createElement("script");
              newScript.textContent = script.textContent;
              document.head.appendChild(newScript);
            }
          });

          console.log("‚úÖ Layout integrado com sucesso - Interface limpa sem header");
        } catch (error) {
          console.error("‚ùå Erro ao carregar layout:", error);
        }
      }

      // Debug panel
      const debugPanel = document.getElementById("debug-panel");
      const debugContent = document.getElementById("debug-content");
      let debugMode = localStorage.getItem("debug-mode") === "true";

      function toggleDebug() {
        debugMode = !debugMode;
        localStorage.setItem("debug-mode", debugMode.toString());
        debugPanel.style.display = debugMode ? "block" : "none";
      }

      // Ctrl+D para ativar debug
      document.addEventListener("keydown", (e) => {
        if (e.ctrlKey && e.key === "d") {
          e.preventDefault();
          toggleDebug();
        }
      });

      function updateDebug(modulo, status, erro = null) {
        if (!debugMode) return;
        const statusIcon =
          status === "ok" ? "‚úÖ" : status === "loading" ? "‚è≥" : "‚ùå";
        const errorText = erro ? ` (${erro})` : "";
        debugContent.innerHTML += `<div>${statusIcon} ${modulo}${errorText}</div>`;
      }

      // Fun√ß√£o para mostrar erro global
      function mostrarErroGlobal(mensagem, erro = null) {
        console.error("‚ùå Erro global:", mensagem, erro);
        const errorDiv = document.getElementById("errorMessage");
        if (errorDiv) {
          errorDiv.innerHTML = `
            <strong>Erro:</strong> ${mensagem}
            ${erro ? `<br><small>${erro.message}</small>` : ""}
            <br><small>Pressione Ctrl+D para ver detalhes do debug</small>
          `;
          errorDiv.style.display = "block";
        }
      }

      // üéØ FUN√á√ïES ADAPTADAS - Fallback sem elementos removidos
      const fallbackFunctions = {
        carregarDetalhesLigaBasico: async () => {
          console.log("üìÑ Usando fallback para carregarDetalhesLigaBasico");
          try {
            // MODIFICA√á√ÉO: Tenta usar a nova fun√ß√£o primeiro
            if (modulosCarregados.participantes?.carregarDadosBasicos) {
              const resultado =
                await modulosCarregados.participantes.carregarDadosBasicos();
              if (resultado) return resultado;
            }

            // Fallback original adaptado - SEM refer√™ncias a elementos removidos
            const params = new URLSearchParams(window.location.search);
            const ligaId = params.get("id");

            if (!ligaId) {
              throw new Error("ID da liga n√£o encontrado na URL");
            }

            console.log(`Fallback: Buscando liga ${ligaId}`);
            const response = await fetch(`/api/ligas/${ligaId}`);

            if (!response.ok) {
              throw new Error(
                `Erro HTTP: ${response.status} ${response.statusText}`,
              );
            }

            const liga = await response.json();

            if (!liga) {
              throw new Error("Liga n√£o encontrada");
            }

            // ‚úÖ ADAPTA√á√ÉO: Apenas log - n√£o atualiza elementos removidos
            const participantes = liga.participantes || liga.times || [];
            const quantidade = Array.isArray(participantes)
              ? participantes.length
              : 0;

            console.log(
              `‚úÖ Fallback: Liga carregada - ${liga.nome} com ${quantidade} participantes`,
            );
            return liga;
          } catch (error) {
            console.error("‚ùå Fallback falhou:", error);
            mostrarErroGlobal("Erro ao carregar dados b√°sicos da liga", error);
          }
        },
      };

      // M√≥dulos para carregar
      const modulosConfig = [
        {
          nome: "participantes",
          arquivo: "./js/participantes.js",
          funcoes: [
            "carregarDetalhesLiga",
            "toggleParticipants",
            "carregarDadosBasicos",
          ],
          critico: true,
        },
        {
          nome: "rodadas",
          arquivo: "./js/rodadas.js",
          funcoes: ["carregarRodadas"],
          critico: false,
        },
        {
          nome: "mata-mata",
          arquivo: "./js/mata-mata.js",
          funcoes: ["carregarMataMata"],
          critico: false,
        },
        {
          nome: "ranking",
          arquivo: "./js/ranking.js",
          funcoes: ["carregarRankingGeral"],
          critico: false,
        },
        {
          nome: "melhor-mes",
          arquivo: "./js/melhor-mes.js",
          funcoes: ["inicializarMelhorMes"],
          critico: false,
        },
        {
          nome: "pontos-corridos",
          arquivo: "./js/pontos-corridos.js",
          funcoes: ["inicializarPontosCorridos"],
          critico: false,
        },
        {
          nome: "top10",
          arquivo: "./js/top10.js",
          funcoes: ["inicializarTop10"],
          critico: false,
        },
        {
          nome: "fluxo-financeiro",
          arquivo: "./js/fluxo-financeiro.js",
          funcoes: ["inicializarFluxoFinanceiro"],
          critico: false,
        },
        {
          nome: "artilheiro-campeao",
          arquivo: "./js/artilheiro-campeao.js",
          funcoes: ["inicializarArtilheiroCampeao"],
          critico: false,
        },
        {
          nome: "luva-de-ouro",
          arquivo: "./js/luva-de-ouro.js",
          funcoes: ["inicializarLuvaDeOuro"],
          critico: false,
        },
      ];

      // Tornar modulosCarregados dispon√≠vel globalmente
      window.modulosCarregados = {};
      const modulosCarregados = window.modulosCarregados;
      let modulo_participantes_ok = false;
      let participantesCarregados = false;

      // Carregar m√≥dulo individual com timeout (vers√£o mais robusta)
      async function carregarModulo(config) {
        updateDebug(config.nome, "loading");

        return new Promise((resolve) => {
          const timeout = setTimeout(() => {
            console.warn(`‚ö†Ô∏è Timeout ao carregar ${config.nome}`);
            updateDebug(config.nome, "error", "timeout");
            resolve(false);
          }, 15000); // 15 segundos timeout aumentado

          import(config.arquivo)
            .then((modulo) => {
              clearTimeout(timeout);

              const funcoesDisponiveis = {};
              let funcoesEncontradas = 0;

              // Verifica√ß√£o mais robusta das fun√ß√µes
              config.funcoes.forEach((funcao) => {
                if (modulo[funcao] && typeof modulo[funcao] === 'function') {
                  funcoesDisponiveis[funcao] = modulo[funcao];
                  funcoesEncontradas++;
                } else {
                  console.warn(
                    `‚ö†Ô∏è Fun√ß√£o ${funcao} n√£o encontrada ou n√£o √© uma fun√ß√£o em ${config.nome}`,
                  );
                }
              });

              if (funcoesEncontradas > 0) {
                modulosCarregados[config.nome] = funcoesDisponiveis;
                console.log(
                  `‚úÖ M√≥dulo ${config.nome} carregado (${funcoesEncontradas}/${config.funcoes.length} fun√ß√µes)`,
                );
                updateDebug(config.nome, "ok");

                if (config.nome === "participantes") {
                  modulo_participantes_ok = true;
                }

                resolve(true);
              } else {
                console.error(
                  `‚ùå Nenhuma fun√ß√£o v√°lida encontrada em ${config.nome}`,
                );
                updateDebug(config.nome, "error", "no valid functions");
                resolve(false);
              }
            })
            .catch((error) => {
              clearTimeout(timeout);
              console.error(`‚ùå Erro ao carregar ${config.nome}:`, error);
              updateDebug(config.nome, "error", error.message || "import failed");
              resolve(false);
            });
        });
      }

      // Fun√ß√£o para carregar participantes quando solicitado (com verifica√ß√µes)
      async function carregarParticipantes() {
        if (participantesCarregados) return;

        // ‚ö†Ô∏è VERIFICAR ELEMENTOS NECESS√ÅRIOS
        const btnCarregar = document.getElementById("carregarParticipantesBtn");
        const inicial = document.getElementById("participantes-inicial");
        const loading = document.getElementById("participantes-loading");

        if (!btnCarregar || !inicial || !loading) {
          console.warn("‚ö†Ô∏è Elementos de participantes n√£o encontrados");
          return;
        }

        try {
          console.log("üìÑ Iniciando carregamento dos participantes...");

          // Desabilita bot√£o e mostra loading
          btnCarregar.disabled = true;
          btnCarregar.textContent = "Carregando...";
          inicial.style.display = "none";
          loading.style.display = "block";

          // Carrega os dados dos participantes
          if (
            modulo_participantes_ok &&
            modulosCarregados.participantes?.carregarDetalhesLiga
          ) {
            await modulosCarregados.participantes.carregarDetalhesLiga();
          } else {
            await fallbackFunctions.carregarDetalhesLigaBasico();
          }

          // Mostra a interface dos participantes
          loading.style.display = "none";
          const toggleBtn = document.querySelector(".toggle-participants");
          const timesContainer = document.getElementById("timesContainer");

          if (toggleBtn) toggleBtn.style.display = "block";
          if (timesContainer) timesContainer.style.display = "block";

          participantesCarregados = true;
          console.log("‚úÖ Participantes carregados com sucesso!");
        } catch (error) {
          console.error("‚ùå Erro ao carregar participantes:", error);
          loading.style.display = "none";
          inicial.style.display = "block";
          btnCarregar.disabled = false;
          btnCarregar.textContent = "üî• Carregar Participantes";
          mostrarErroGlobal("Erro ao carregar participantes", error);
        }
      }

      // ‚úÖ ADAPTA√á√ÉO: Fun√ß√£o para executar a√ß√µes dos m√≥dulos (navega√ß√£o hier√°rquica)
      async function executarAcaoModulo(moduleId, targetElement = null) {
        console.log(`üéØ Executando m√≥dulo: ${moduleId}`);

        // Se n√£o especificou elemento alvo, usar container padr√£o na tela principal
        if (!targetElement) {
          // Criar ou encontrar container de conte√∫do
          let contentContainer = document.getElementById('module-execution-area');
          if (!contentContainer) {
            contentContainer = document.createElement('div');
            contentContainer.id = 'module-execution-area';
            contentContainer.className = 'dynamic-content';
            contentContainer.style.cssText = `
              background: var(--bg-card);
              border: 1px solid var(--border-primary);
              border-radius: 16px;
              margin-top: 32px;
              padding: 24px;
              min-height: 400px;
            `;

            // Inserir ap√≥s grid de m√≥dulos ou ap√≥s tela secund√°ria
            const insertPoint = document.getElementById('secondary-screen') || document.querySelector('.modules-grid');
            if (insertPoint && insertPoint.parentNode) {
              insertPoint.parentNode.insertBefore(contentContainer, insertPoint.nextSibling);
            }
          }
          targetElement = contentContainer;
        }

        // Mostrar loading
        targetElement.innerHTML = `
          <div class="content-body">
            <div class="loading-container">
              <div class="loading-spinner"></div>
              <p>Carregando ${moduleId}...</p>
            </div>
          </div>
        `;

        // Scroll suave para o conte√∫do
        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });

        try {
          // Mapear m√≥dulo para o conte√∫do correto
          let targetContainer;

          switch (moduleId) {
            case "participantes":
            case "participantes-lista":
              // Injetar conte√∫do de participantes
              targetContainer = document.getElementById('participantes');
              if (targetContainer) {
                targetElement.innerHTML = `
                  <div class="content-header">
                    <h2 class="content-title">
                      <i data-lucide="users" class="content-icon"></i>
                      Participantes da Liga
                    </h2>
                    <p class="content-subtitle">Gest√£o completa dos times e membros</p>
                  </div>
                  <div class="content-body">
                    ${targetContainer.innerHTML}
                  </div>
                `;
              }
              break;

            case "rodadas":
              targetContainer = document.getElementById('rodadas');
              if (targetContainer) {
                targetElement.innerHTML = `
                  <div class="content-header">
                    <h2 class="content-title">
                      <i data-lucide="bar-chart-3" class="content-icon"></i>
                      An√°lise por Rodadas
                    </h2>
                    <p class="content-subtitle">Rankings e estat√≠sticas detalhadas</p>
                  </div>
                  <div class="content-body">
                    ${targetContainer.innerHTML}
                  </div>
                `;

                // Executar fun√ß√£o espec√≠fica
                if (modulosCarregados.rodadas?.carregarRodadas) {
                  await modulosCarregados.rodadas.carregarRodadas();
                } else {
                  console.warn("‚ö†Ô∏è M√≥dulo rodadas n√£o dispon√≠vel");
                }
              }
              break;

            case "mata-mata":
              targetContainer = document.getElementById('mata-mata');
              if (targetContainer) {
                targetElement.innerHTML = `
                  <div class="content-header">
                    <h2 class="content-title">
                      <i data-lucide="target" class="content-icon"></i>
                      Disputas Mata-Mata
                    </h2>
                    <p class="content-subtitle">Eliminat√≥rias e confrontos diretos</p>
                  </div>
                  <div class="content-body">
                    ${targetContainer.innerHTML}
                  </div>
                `;

                if (modulosCarregados["mata-mata"]?.carregarMataMata) {
                  await modulosCarregados["mata-mata"].carregarMataMata();
                } else {
                  console.warn("‚ö†Ô∏è M√≥dulo mata-mata n√£o dispon√≠vel");
                }
              }
              break;

            case "ranking-geral":
              targetContainer = document.getElementById('ranking-geral');
              if (targetContainer) {
                targetElement.innerHTML = `
                  <div class="content-header">
                    <h2 class="content-title">
                      <i data-lucide="crown" class="content-icon"></i>
                      Ranking Geral
                    </h2>
                    <p class="content-subtitle">Classifica√ß√£o geral da temporada</p>
                  </div>
                  <div class="content-body">
                    ${targetContainer.innerHTML}
                  </div>
                `;

                if (modulosCarregados.ranking?.carregarRankingGeral) {
                  await modulosCarregados.ranking.carregarRankingGeral();
                } else {
                  console.warn("‚ö†Ô∏è M√≥dulo ranking n√£o dispon√≠vel");
                }
              }
              break;

            case "melhor-mes":
              targetContainer = document.getElementById('melhor-mes');
              if (targetContainer) {
                targetElement.innerHTML = `
                  <div class="content-header">
                    <h2 class="content-title">
                      <i data-lucide="star" class="content-icon"></i>
                      Melhor do M√™s
                    </h2>
                    <p class="content-subtitle">Champions mensais da liga</p>
                  </div>
                  <div class="content-body">
                    ${targetContainer.innerHTML}
                  </div>
                `;

                if (modulosCarregados["melhor-mes"]?.inicializarMelhorMes) {
                  await modulosCarregados["melhor-mes"].inicializarMelhorMes();
                } else {
                  console.warn("‚ö†Ô∏è M√≥dulo melhor-mes n√£o dispon√≠vel");
                }
              }
              break;

            case "pontos-corridos":
              targetContainer = document.getElementById('pontos-corridos');
              if (targetContainer) {
                targetElement.innerHTML = `
                  <div class="content-header">
                    <h2 class="content-title">
                      <i data-lucide="trending-up" class="content-icon"></i>
                      Liga Pontos Corridos
                    </h2>
                    <p class="content-subtitle">Classifica√ß√£o formato campeonato</p>
                  </div>
                  <div class="content-body">
                    ${targetContainer.innerHTML}
                  </div>
                `;

                if (modulosCarregados["pontos-corridos"]?.inicializarPontosCorridos) {
                  await modulosCarregados["pontos-corridos"].inicializarPontosCorridos();
                } else {
                  console.warn("‚ö†Ô∏è M√≥dulo pontos-corridos n√£o dispon√≠vel");
                }
              }
              break;

            case "top-10":
              targetContainer = document.getElementById('top-10');
              if (targetContainer) {
                targetElement.innerHTML = `
                  <div class="content-header">
                    <h2 class="content-title">
                      <i data-lucide="trending-up" class="content-icon"></i>
                      Top 10 - Mitos e Micos
                    </h2>
                    <p class="content-subtitle">Melhores e piores performances</p>
                  </div>
                  <div class="content-body">
                    ${targetContainer.innerHTML}
                  </div>
                `;

                if (modulosCarregados.top10?.inicializarTop10) {
                  await modulosCarregados.top10.inicializarTop10();
                } else {
                  console.warn("‚ö†Ô∏è M√≥dulo top10 n√£o dispon√≠vel");
                }
              }
              break;

            case "fluxo-financeiro":
              targetContainer = document.getElementById('fluxo-financeiro');
              if (targetContainer) {
                targetElement.innerHTML = `
                  <div class="content-header">
                    <h2 class="content-title">
                      <i data-lucide="dollar-sign" class="content-icon"></i>
                      Fluxo Financeiro
                    </h2>
                    <p class="content-subtitle">Controle de receitas e despesas</p>
                  </div>
                  <div class="content-body">
                    ${targetContainer.innerHTML}
                  </div>
                `;

                if (modulosCarregados["fluxo-financeiro"]?.inicializarFluxoFinanceiro) {
                  await modulosCarregados["fluxo-financeiro"].inicializarFluxoFinanceiro();
                } else {
                  console.warn("‚ö†Ô∏è M√≥dulo fluxo-financeiro n√£o dispon√≠vel");
                }
              }
              break;

            case "artilheiro-campeao":
              targetContainer = document.getElementById('artilheiro-campeao');
              if (targetContainer) {
                targetElement.innerHTML = `
                  <div class="content-header">
                    <h2 class="content-title">
                      <i data-lucide="zap" class="content-icon"></i>
                      Artilheiro Campe√£o
                    </h2>
                    <p class="content-subtitle">Ranking dos maiores artilheiros</p>
                  </div>
                  <div class="content-body">
                    ${targetContainer.innerHTML}
                  </div>
                `;

                if (modulosCarregados["artilheiro-campeao"]?.inicializarArtilheiroCampeao) {
                  await modulosCarregados["artilheiro-campeao"].inicializarArtilheiroCampeao();
                } else {
                  console.warn("‚ö†Ô∏è M√≥dulo artilheiro-campeao n√£o dispon√≠vel");
                }
              }
              break;

            case "luva-de-ouro":
              targetContainer = document.getElementById('luva-de-ouro');
              if (targetContainer) {
                targetElement.innerHTML = `
                  <div class="content-header">
                    <h2 class="content-title">
                      <i data-lucide="shield" class="content-icon"></i>
                      Luva de Ouro
                    </h2>
                    <p class="content-subtitle">Melhores goleiros da competi√ß√£o</p>
                  </div>
                  <div class="content-body">
                    ${targetContainer.innerHTML}
                  </div>
                `;

                if (modulosCarregados["luva-de-ouro"]?.inicializarLuvaDeOuro) {
                  await modulosCarregados["luva-de-ouro"].inicializarLuvaDeOuro();
                } else {
                  console.warn("‚ö†Ô∏è M√≥dulo luva-de-ouro n√£o dispon√≠vel");
                }
              }
              break;

            case "parciais":
              // Redirecionar para parciais.html
              window.location.href = 'parciais.html';
              return;

            default:
              targetElement.innerHTML = `
                <div class="content-header">
                  <h2 class="content-title">
                    <i data-lucide="circle" class="content-icon"></i>
                    M√≥dulo em Desenvolvimento
                  </h2>
                  <p class="content-subtitle">${moduleId}</p>
                </div>
                <div class="content-body">
                  <div class="alert alert-info">
                    <strong>Em breve!</strong><br>
                    O m√≥dulo "${moduleId}" ser√° implementado em uma pr√≥xima atualiza√ß√£o.
                  </div>
                </div>
              `;
          }

          // Reinicializar √≠cones ap√≥s inje√ß√£o de conte√∫do
          if (typeof lucide !== 'undefined') {
            lucide.createIcons();
          }

        } catch (error) {
          console.error(`‚ùå Erro ao executar m√≥dulo ${moduleId}:`, error);
          targetElement.innerHTML = `
            <div class="content-body">
              <div class="alert alert-error">
                <strong>Erro:</strong> Falha ao carregar o m√≥dulo ${moduleId}<br>
                <small>${error.message}</small>
              </div>
            </div>
          `;
        }
      }
      async function executarAcaoAba(tabId) {
        console.log(`üéØ Executando a√ß√£o da aba: ${tabId}`);
        try {
          switch (tabId) {
            case "participantes":
              // Para a aba participantes, apenas mostra a interface atual
              // O carregamento √© feito pelo bot√£o espec√≠fico
              break;
            case "rodadas":
              if (modulosCarregados.rodadas?.carregarRodadas) {
                await modulosCarregados.rodadas.carregarRodadas();
              } else {
                console.warn("‚ö†Ô∏è M√≥dulo rodadas n√£o dispon√≠vel");
              }
              break;
            case "mata-mata":
              if (modulosCarregados["mata-mata"]?.carregarMataMata) {
                await modulosCarregados["mata-mata"].carregarMataMata();
              } else {
                console.warn("‚ö†Ô∏è M√≥dulo mata-mata n√£o dispon√≠vel");
              }
              break;
            case "ranking-geral":
              if (modulosCarregados.ranking?.carregarRankingGeral) {
                await modulosCarregados.ranking.carregarRankingGeral();
              } else {
                console.warn("‚ö†Ô∏è M√≥dulo ranking n√£o dispon√≠vel");
              }
              break;
            case "melhor-mes":
              if (modulosCarregados["melhor-mes"]?.inicializarMelhorMes) {
                await modulosCarregados["melhor-mes"].inicializarMelhorMes();
              } else {
                console.warn("‚ö†Ô∏è M√≥dulo melhor-mes n√£o dispon√≠vel");
              }
              break;
            case "pontos-corridos":
              if (
                modulosCarregados["pontos-corridos"]?.inicializarPontosCorridos
              ) {
                await modulosCarregados[
                  "pontos-corridos"
                ].inicializarPontosCorridos();
              } else {
                console.warn("‚ö†Ô∏è M√≥dulo pontos-corridos n√£o dispon√≠vel");
              }
              break;
            case "top-10":
              if (modulosCarregados.top10?.inicializarTop10) {
                await modulosCarregados.top10.inicializarTop10();
              } else {
                console.warn("‚ö†Ô∏è M√≥dulo top10 n√£o dispon√≠vel");
              }
              break;
            case "fluxo-financeiro":
              if (
                modulosCarregados["fluxo-financeiro"]
                  ?.inicializarFluxoFinanceiro
              ) {
                await modulosCarregados[
                  "fluxo-financeiro"
                ].inicializarFluxoFinanceiro();
              } else {
                console.warn("‚ö†Ô∏è M√≥dulo fluxo-financeiro n√£o dispon√≠vel");
              }
              break;
            case "artilheiro-campeao":
              if (
                modulosCarregados["artilheiro-campeao"]
                  ?.inicializarArtilheiroCampeao
              ) {
                await modulosCarregados[
                  "artilheiro-campeao"
                ].inicializarArtilheiroCampeao();
              } else {
                console.warn("‚ö†Ô∏è M√≥dulo artilheiro-campeao n√£o dispon√≠vel");
              }
              break;
            case "luva-de-ouro":
              if (modulosCarregados["luva-de-ouro"]?.inicializarLuvaDeOuro) {
                await modulosCarregados["luva-de-ouro"].inicializarLuvaDeOuro();
              } else {
                console.warn("‚ö†Ô∏è M√≥dulo luva-de-ouro n√£o dispon√≠vel");
              }
              break;
          }
        } catch (error) {
          console.error(`‚ùå Erro ao executar a√ß√£o da aba ${tabId}:`, error);
          mostrarErroGlobal(`Erro na aba ${tabId}`, error);
        }
      }

      // ‚úÖ CORRE√á√ÉO: Fun√ß√£o atualizarPagina unificada
      async function atualizarPagina() {
        console.log("üéØ DOM carregado, iniciando aplica√ß√£o...");

        try {
          // === INTEGRA√á√ÉO COM LAYOUT PRIMEIRO ===
          await loadLayout();

          // Carregar dados b√°sicos automaticamente (adaptado)
          console.log("üì¶ Carregando dados b√°sicos da liga...");
          await fallbackFunctions.carregarDetalhesLigaBasico();

          // Carregar m√≥dulos cr√≠ticos
          console.log("üì¶ Carregando m√≥dulos cr√≠ticos...");
          const criticos = modulosConfig.filter((m) => m.critico);
          for (const modulo of criticos) {
            await carregarModulo(modulo);
          }

          // Carregar m√≥dulos n√£o-cr√≠ticos
          console.log("üì¶ Carregando m√≥dulos n√£o-cr√≠ticos...");
          const naoCriticos = modulosConfig.filter((m) => !m.critico);
          const promises = naoCriticos.map(carregarModulo);
          await Promise.allSettled(promises);

          console.log("üéõÔ∏è Configurando interface...");

          // ‚úÖ INICIALIZA√á√ÉO DOS √çCONES LUCIDE
          if (typeof lucide !== 'undefined') {
            lucide.createIcons();
            console.log("‚úÖ √çcones Lucide carregados");
          } else {
            console.warn("‚ö†Ô∏è Lucide n√£o carregado - usando fallback");
          }

          // Configurar personaliza√ß√£o da liga
          const params = new URLSearchParams(window.location.search);
          const ligaId = params.get("id");

          const tabMataMata = document.querySelector(
            '.tab[data-tab="mata-mata"]',
          );
          const tabPontosCorridos = document.querySelector(
            '.tab[data-tab="pontos-corridos"]',
          );
          const tabArtilheiro = document.querySelector(
            '.tab[data-tab="artilheiro-campeao"]',
          );
          const tabLuva = document.querySelector(
            '.tab[data-tab="luva-de-ouro"]',
          );

          if (tabArtilheiro) tabArtilheiro.style.display = "none";
          if (tabLuva) tabLuva.style.display = "none";

          if (ligaId === "684d821cf1a7ae16d1f89572") {
            if (tabMataMata) tabMataMata.style.display = "none";
            if (tabPontosCorridos) tabPontosCorridos.style.display = "none";
            if (tabArtilheiro) tabArtilheiro.style.display = "";
            if (tabLuva) tabLuva.style.display = "";
          }

          // ‚úÖ CONFIGURAR NAVEGA√á√ÉO HIER√ÅRQUICA (com verifica√ß√£o de exist√™ncia)
          const mainScreen = document.getElementById('main-screen');
          const secondaryScreen = document.getElementById('secondary-screen');
          const backButton = document.getElementById('back-to-main');
          const currentModuleIcon = document.getElementById('current-module-icon');
          const currentModuleTitle = document.getElementById('current-module-title');
          const currentModuleSubtitle = document.getElementById('current-module-subtitle');
          const secondaryContent = document.getElementById('secondary-content');

          // ‚úÖ VERIFICA√á√ÉO DE ELEMENTOS CR√çTICOS (com debug detalhado)
          if (!mainScreen || !secondaryScreen) {
            console.error("‚ùå CR√çTICO: Elementos de navega√ß√£o n√£o encontrados!");
            console.log("üîç main-screen existe:", !!mainScreen);
            console.log("üîç secondary-screen existe:", !!secondaryScreen);
            console.log("üîç container existe:", !!document.querySelector('.container'));

            // FALLBACK: Criar elementos se n√£o existirem
            if (!mainScreen) {
              console.log("üîß Criando main-screen dinamicamente...");
              const container = document.querySelector('.container');
              if (container) {
                const modulesGrid = container.querySelector('.modules-grid');
                if (modulesGrid) {
                  const newMainScreen = document.createElement('div');
                  newMainScreen.id = 'main-screen';
                  newMainScreen.className = 'main-screen';

                  // Mover modules-grid para dentro do main-screen
                  newMainScreen.appendChild(modulesGrid);
                  container.appendChild(newMainScreen);

                  console.log("‚úÖ main-screen criado e modules-grid movido");
                }
              }
            }

            if (!secondaryScreen) {
              console.log("üîß Criando secondary-screen dinamicamente...");
              const container = document.querySelector('.container');
              if (container) {
                container.insertAdjacentHTML('beforeend', `
                  <div class="secondary-screen" id="secondary-screen">
                    <div class="secondary-header">
                      <button class="back-button" id="back-to-main">
                        <i data-lucide="arrow-left" class="back-icon"></i>
                        Voltar
                      </button>
                      <div class="module-title">
                        <i data-lucide="circle" class="module-icon" id="current-module-icon"></i>
                        <h1 id="current-module-title">M√≥dulo</h1>
                      </div>
                    </div>
                    <div class="module-subtitle" id="current-module-subtitle">
                      Selecione uma op√ß√£o abaixo para continuar
                    </div>
                    <div id="secondary-content"></div>
                  </div>
                `);
                console.log("‚úÖ secondary-screen criado dinamicamente");
              }
            }

            // Reobter elementos ap√≥s cria√ß√£o
            const newMainScreen = document.getElementById('main-screen');
            const newSecondaryScreen = document.getElementById('secondary-screen');

            if (!newMainScreen || !newSecondaryScreen) {
              console.error("‚ùå FALHA CR√çTICA: N√£o foi poss√≠vel criar elementos de navega√ß√£o");
              // Mostrar interface b√°sica como fallback
              showBasicInterface();
              return;
            } else {
              console.log("‚úÖ Elementos de navega√ß√£o verificados com sucesso");

            // ‚úÖ GARANTIR QUE NENHUM M√ìDULO SEJA PR√â-ATIVADO
            console.log("üö´ Verificando pr√©-ativa√ß√µes autom√°ticas...");

            // Desativar qualquer tab ou content que possa estar ativo
            const activeTabs = document.querySelectorAll('.tab.active, .tab-content.active');
            activeTabs.forEach(element => {
              element.classList.remove('active');
              console.log("üö´ Removido classe active de:", element);
            });

            // Garantir que containers de m√≥dulos estejam ocultos
            const hiddenContainers = [
              '#timesContainer', 
              '#participantes-loading',
              '.toggle-participants',
              '#dynamic-content',
              '#module-execution-area'
            ];

            hiddenContainers.forEach(selector => {
              const element = document.querySelector(selector);
              if (element) {
                element.style.display = 'none';
                console.log("üö´ Ocultado elemento:", selector);
              }
            });

            // Garantir que apenas main-screen esteja vis√≠vel
            if (mainScreen) {
              mainScreen.classList.remove('hidden');
              mainScreen.style.display = 'block';
            }

            if (secondaryScreen) {
              secondaryScreen.classList.remove('active');
              secondaryScreen.style.display = 'none';
            }

            console.log("‚úÖ Interface limpa - nenhum m√≥dulo pr√©-selecionado");

          // Templates dos sub-m√≥dulos por categoria
          const moduleTemplates = {
            participantes: {
              icon: 'users',
              title: 'Participantes da Liga',
              subtitle: 'Gest√£o completa dos times e membros da liga',
              sections: [
                {
                  title: 'üéØ A√ß√µes Principais',
                  icon: 'target',
                  modules: [
                    {
                      id: 'participantes-lista',
                      icon: 'list',
                      title: 'Listar Participantes',
                      description: 'Visualizar todos os times cadastrados',
                      status: 'ready',
                      action: 'participantes'
                    },
                    {
                      id: 'participantes-carregar',
                      icon: 'download-cloud',
                      title: 'Carregar do Cartola FC',
                      description: 'Importar times diretamente da API',
                      status: 'active',
                      action: 'participantes-import'
                    }
                  ]
                },
                {
                  title: 'üõ†Ô∏è Ferramentas',
                  icon: 'tool',
                  modules: [
                    {
                      id: 'participantes-stats',
                      icon: 'bar-chart',
                      title: 'Estat√≠sticas',
                      description: 'An√°lises detalhadas dos participantes',
                      status: 'ready',
                      action: 'participantes-stats'
                    },
                    {
                      id: 'participantes-export',
                      icon: 'file-text',
                      title: 'Exportar Dados',
                      description: 'Relat√≥rios em PDF/Excel',
                      status: 'ready',
                      action: 'participantes-export'
                    }
                  ]
                }
              ]
            },

            rodadas: {
              icon: 'bar-chart-3',
              title: 'An√°lise por Rodadas',
              subtitle: 'Rankings e estat√≠sticas detalhadas de cada rodada',
              sections: [
                {
                  title: 'üéØ An√°lise Principal',
                  icon: 'activity',
                  modules: [
                    {
                      id: 'rodadas-ranking',
                      icon: 'list-ordered',
                      title: 'Ranking por Rodada',
                      description: 'Classifica√ß√£o detalhada de cada rodada',
                      status: 'active',
                      action: 'rodadas'
                    },
                    {
                      id: 'rodadas-parciais',
                      icon: 'clock',
                      title: 'Resultados Parciais',
                      description: 'Acompanhar rodada em andamento',
                      status: 'ready',
                      action: 'parciais'
                    }
                  ]
                },
                {
                  title: 'üõ†Ô∏è Ferramentas',
                  icon: 'settings',
                  modules: [
                    {
                      id: 'rodadas-comparar',
                      icon: 'git-compare',
                      title: 'Comparar Rodadas',
                      description: 'An√°lise comparativa de performance',
                      status: 'ready',
                      action: 'rodadas-compare'
                    },
                    {
                      id: 'rodadas-export',
                      icon: 'download',
                      title: 'Exportar HQ',
                      description: 'Relat√≥rio visual estilo quadrinhos',
                      status: 'ready',
                      action: 'rodadas-export-hq'
                    }
                  ]
                }
              ]
            },

            rankings: {
              icon: 'trophy',
              title: 'Central de Rankings',
              subtitle: 'Todos os formatos de classifica√ß√£o dispon√≠veis',
              sections: [
                {
                  title: 'üèÜ Rankings Principais',
                  icon: 'award',
                  modules: [
                    {
                      id: 'ranking-geral',
                      icon: 'crown',
                      title: 'Ranking Geral',
                      description: 'Classifica√ß√£o geral de toda temporada',
                      status: 'ready',
                      action: 'ranking-geral'
                    },
                    {
                      id: 'top-10-mitos',
                      icon: 'trending-up',
                      title: 'Top 10 Mitos',
                      description: 'Melhores performances da liga',
                      status: 'ready',
                      action: 'top-10'
                    },
                    {
                      id: 'top-10-micos',
                      icon: 'trending-down',
                      title: 'Top 10 Micos',
                      description: 'Piores performances da liga',
                      status: 'ready',
                      action: 'top-10'
                    }
                  ]
                },
                {
                  title: 'üìÖ Por Per√≠odo',
                  icon: 'calendar',
                  modules: [
                    {
                      id: 'melhor-mes',
                      icon: 'star',
                      title: 'Melhor do M√™s',
                      description: 'Champions mensais da liga',
                      status: 'ready',
                      action: 'melhor-mes'
                    }
                  ]
                }
              ]
            },

            competicoes: {
              icon: 'swords',
              title: 'Competi√ß√µes da Liga',
              subtitle: 'Mata-mata, pontos corridos e outras disputas',
              sections: [
                {
                  title: '‚öîÔ∏è Disputas Ativas',
                  icon: 'zap',
                  modules: [
                    {
                      id: 'mata-mata',
                      icon: 'target',
                      title: 'Mata-Mata',
                      description: 'Eliminat√≥rias e confrontos diretos',
                      status: 'active',
                      action: 'mata-mata'
                    },
                    {
                      id: 'pontos-corridos',
                      icon: 'trending-up',
                      title: 'Pontos Corridos',
                      description: 'Liga no formato campeonato',
                      status: 'active',
                      action: 'pontos-corridos'
                    }
                  ]
                }
              ]
            },

            financeiro: {
              icon: 'dollar-sign',
              title: 'Gest√£o Financeira',
              subtitle: 'Controle completo de receitas, despesas e premia√ß√µes',
              sections: [
                {
                  title: 'üí∞ Controle Principal',
                  icon: 'calculator',
                  modules: [
                    {
                      id: 'fluxo-financeiro',
                      icon: 'trending-up',
                      title: 'Fluxo de Caixa',
                      description: 'Entradas, sa√≠das e saldo atual',
                      status: 'active',
                      action: 'fluxo-financeiro'
                    }
                  ]
                },
                {
                  title: 'üìä Relat√≥rios',
                  icon: 'file-text',
                  modules: [
                    {
                      id: 'financeiro-export',
                      icon: 'download',
                      title: 'Exportar Financeiro',
                      description: 'Relat√≥rios detalhados em PDF',
                      status: 'ready',
                      action: 'financeiro-export'
                    }
                  ]
                }
              ]
            },

            especialistas: {
              icon: 'medal',
              title: 'Competi√ß√µes Especiais',
              subtitle: 'Rankings espec√≠ficos por posi√ß√£o',
              sections: [
                {
                  title: 'üèÜ Especialistas Ativos',
                  icon: 'star',
                  modules: [
                    {
                      id: 'artilheiro-campeao',
                      icon: 'zap',
                      title: 'Artilheiro Campe√£o',
                      description: 'Ranking dos maiores artilheiros',
                      status: 'ready',
                      action: 'artilheiro-campeao'
                    },
                    {
                      id: 'luva-de-ouro',
                      icon: 'shield',
                      title: 'Luva de Ouro',
                      description: 'Melhores goleiros da competi√ß√£o',
                      status: 'ready',
                      action: 'luva-de-ouro'
                    }
                  ]
                }
              ]
            }
          };

          // Fun√ß√£o para navegar para tela secund√°ria (com par√¢metros din√¢micos)
          function navigateToModule(moduleKey, mainScreenEl = null, secondaryScreenEl = null) {
            const template = moduleTemplates[moduleKey];
            if (!template) {
              console.error(`Template para m√≥dulo ${moduleKey} n√£o encontrado`);
              return;
            }

            // Usar elementos passados ou reobt√™-los
            const currentMainScreen = mainScreenEl || document.getElementById('main-screen');
            const currentSecondaryScreen = secondaryScreenEl || document.getElementById('secondary-screen');
            const currentModuleIcon = document.getElementById('current-module-icon');
            const currentModuleTitle = document.getElementById('current-module-title');
            const currentModuleSubtitle = document.getElementById('current-module-subtitle');
            const secondaryContent = document.getElementById('secondary-content');

            // ‚ö†Ô∏è VERIFICAR EXIST√äNCIA DOS ELEMENTOS
            if (!currentMainScreen || !currentSecondaryScreen || !currentModuleIcon || !currentModuleTitle || !currentModuleSubtitle || !secondaryContent) {
              console.warn("‚ö†Ô∏è Alguns elementos da navega√ß√£o n√£o encontrados, executando m√≥dulo diretamente");
              executarAcaoModulo(moduleKey);
              return;
            }

            console.log(`üì± Navegando para m√≥dulo: ${template.title}`);

            // Atualizar header da tela secund√°ria
            currentModuleIcon.setAttribute('data-lucide', template.icon);
            currentModuleTitle.textContent = template.title;
            currentModuleSubtitle.textContent = template.subtitle;

            // Gerar conte√∫do das se√ß√µes
            let sectionsHTML = '';
            template.sections.forEach(section => {
              sectionsHTML += `
                <div class="sub-modules-section">
                  <h3 class="section-title">
                    <i data-lucide="${section.icon}" class="section-icon"></i>
                    ${section.title}
                  </h3>
                  <div class="sub-modules-grid">
                    ${section.modules.map(module => `
                      <div class="sub-module-card" data-action="${module.action}" data-module-id="${module.id}">
                        <div class="sub-card-header">
                          <div class="sub-card-icon">
                            <i data-lucide="${module.icon}"></i>
                          </div>
                          <h4 class="sub-card-title">${module.title}</h4>
                        </div>
                        <p class="sub-card-description">${module.description}</p>
                        <div class="sub-card-meta">
                          <span class="sub-card-status status-${module.status}">
                            ${module.status === 'ready' ? 'Dispon√≠vel' : 
                              module.status === 'active' ? 'Ativo' : 
                              module.status === 'warning' ? 'Pendente' : 'Status'}
                          </span>
                          <span class="sub-card-shortcut">Enter</span>
                        </div>
                      </div>
                    `).join('')}
                  </div>
                </div>
              `;
            });

            secondaryContent.innerHTML = sectionsHTML;

            // Transi√ß√£o visual
            currentMainScreen.classList.add('hidden');
            currentMainScreen.style.display = 'none';
            currentSecondaryScreen.classList.add('active');  
            currentSecondaryScreen.style.display = 'block';

            // Reinicializar √≠cones
            if (typeof lucide !== 'undefined') {
              lucide.createIcons();
            }

            console.log(`‚úÖ Navega√ß√£o para ${template.title} conclu√≠da`);
          }

          // Fun√ß√£o para voltar √† tela principal (com par√¢metros din√¢micos)
          function navigateToMain(mainScreenEl = null, secondaryScreenEl = null) {
            // Usar elementos passados ou reobt√™-los
            const currentMainScreen = mainScreenEl || document.getElementById('main-screen');
            const currentSecondaryScreen = secondaryScreenEl || document.getElementById('secondary-screen');

            // ‚ö†Ô∏è VERIFICAR EXIST√äNCIA DOS ELEMENTOS
            if (!currentMainScreen || !currentSecondaryScreen) {
              console.warn("‚ö†Ô∏è Elementos de navega√ß√£o n√£o encontrados para voltar");
              return;
            }

            console.log('üì± Voltando para tela principal');

            // Transi√ß√£o visual
            currentMainScreen.classList.remove('hidden');
            currentMainScreen.style.display = 'block';
            currentSecondaryScreen.classList.remove('active');
            currentSecondaryScreen.style.display = 'none';

            console.log('‚úÖ Retorno √† tela principal conclu√≠do');
          }

          // Event listeners para navega√ß√£o (com verifica√ß√£o cont√≠nua)
          document.addEventListener('click', (e) => {
            // Navega√ß√£o para m√≥dulos (tela secund√°ria)
            const navigateBtn = e.target.closest('[data-navigate]');
            if (navigateBtn) {
              const moduleKey = navigateBtn.dataset.navigate;
              console.log(`üéØ Clique detectado - navegando para: ${moduleKey}`);

              // Reobt√©m elementos atuais para garantir que existam
              const currentMainScreen = document.getElementById('main-screen');
              const currentSecondaryScreen = document.getElementById('secondary-screen');

              if (currentMainScreen && currentSecondaryScreen) {
                navigateToModule(moduleKey, currentMainScreen, currentSecondaryScreen);
              } else {
                console.error("‚ùå Elementos de navega√ß√£o n√£o encontrados no momento do clique");
                // Fallback: executar m√≥dulo diretamente
                executarAcaoModulo(moduleKey);
              }
              return;
            }

            // Bot√£o voltar (verifica√ß√£o din√¢mica) 
            const backBtn = e.target.closest('#back-to-main');
            if (backBtn) {
              console.log("üéØ Clique em voltar detectado");
              const currentMainScreen = document.getElementById('main-screen');
              const currentSecondaryScreen = document.getElementById('secondary-screen');

              if (currentMainScreen && currentSecondaryScreen) {
                navigateToMain(currentMainScreen, currentSecondaryScreen);
              } else {
                console.error("‚ùå Elementos de navega√ß√£o n√£o encontrados para voltar");
              }
              return;
            }

            // A√ß√µes dos sub-m√≥dulos (executar fun√ß√£o)
            const actionBtn = e.target.closest('[data-action]');
            if (actionBtn && actionBtn.closest('#secondary-content')) {
              const action = actionBtn.dataset.action;
              console.log(`üéØ A√ß√£o de sub-m√≥dulo detectada: ${action}`);
              executeSubModuleAction(action);
              return;
            }
          });

          // Tecla ESC para voltar (com verifica√ß√£o din√¢mica de contexto)
          document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
              const currentSecondaryScreen = document.getElementById('secondary-screen');
              if (currentSecondaryScreen && currentSecondaryScreen.classList.contains('active')) {
                console.log('‚å®Ô∏è ESC pressionado - voltando √† tela principal');
                const currentMainScreen = document.getElementById('main-screen');
                navigateToMain(currentMainScreen, currentSecondaryScreen);
              }
            }
          });

          // Fun√ß√£o para executar a√ß√µes dos sub-m√≥dulos (com verifica√ß√µes)
          async function executeSubModuleAction(action) {
            console.log(`üéØ Executando sub-m√≥dulo: ${action}`);

            try {
              // Voltar para tela principal antes de executar
              const currentMainScreen = document.getElementById('main-screen');
              const currentSecondaryScreen = document.getElementById('secondary-screen');

              if (currentMainScreen && currentSecondaryScreen) {
                navigateToMain(currentMainScreen, currentSecondaryScreen);
              }

              // Aguardar transi√ß√£o e executar m√≥dulo original
              setTimeout(async () => {
                await executarAcaoModulo(action, document.body);
              }, 300);
            } catch (error) {
              console.error(`‚ùå Erro ao executar sub-m√≥dulo ${action}:`, error);
              mostrarErroGlobal(`Erro ao executar ${action}`, error);
            }
          }

          // Configurar event listeners das abas antigas (compatibilidade - DESATIVADO)
          // Removido para evitar pr√©-sele√ß√£o autom√°tica dos participantes

          // ‚úÖ COMPATIBILIDADE: Manter funcionalidades espec√≠ficas
          // Configurar bot√£o de carregar participantes (se necess√°rio)

          // Configurar bot√£o de carregar participantes
          const btnCarregarParticipantes = document.getElementById(
            "carregarParticipantesBtn",
          );
          if (btnCarregarParticipantes) {
            btnCarregarParticipantes.addEventListener(
              "click",
              carregarParticipantes,
            );
          }

          // Configurar bot√£o toggle (s√≥ funciona depois de carregar)
          const toggleButton = document.querySelector(".toggle-participants");
          if (toggleButton) {
            if (modulosCarregados.participantes?.toggleParticipants) {
              toggleButton.onclick =
                modulosCarregados.participantes.toggleParticipants;
            } else {
              toggleButton.onclick = () => {
                const container = document.getElementById("timesContainer");
                container.style.display =
                  container.style.display === "none" ? "block" : "none";
              };
            }
          }

          const refreshButton = document.getElementById("refreshApiBtn");
          if (refreshButton && modulosCarregados.rodadas?.carregarRodadas) {
            refreshButton.onclick = () =>
              modulosCarregados.rodadas.carregarRodadas(true);
          }

          console.log("üéâ Aplica√ß√£o inicializada!");
          console.log("üìä M√≥dulos carregados:", Object.keys(modulosCarregados));

          if (debugMode) {
            updateDebug(
              "SISTEMA",
              "ok",
              `${Object.keys(modulosCarregados).length} m√≥dulos ativos`,
            );
          }
        } catch (error) {
          console.error("‚ùå Erro cr√≠tico:", error);
          mostrarErroGlobal("Erro cr√≠tico na inicializa√ß√£o", error);
        }
      }

      // ‚úÖ Event listener para DOMContentLoaded
      document.addEventListener("DOMContentLoaded", async () => {
        const globalLoading = document.getElementById("global-loading");

        // Mostrar loading usando classe
        if (globalLoading) {
          globalLoading.className = "show";
        }

        // Timeout de seguran√ßa - esconde loading ap√≥s 30 segundos no m√°ximo
        const safetyTimeout = setTimeout(() => {
          console.warn("‚ö†Ô∏è Timeout de seguran√ßa - escondendo loading");
          if (globalLoading) {
            globalLoading.className = "hide";
          }
        }, 30000);

        try {
          await atualizarPagina();

          // Verificar se h√° uma aba espec√≠fica na URL
          const urlParams = new URLSearchParams(window.location.search);
          const tabParam = urlParams.get("tab");

          if (tabParam) {
            // Ativar a aba espec√≠fica
            const tabButton = document.querySelector(
              `[data-tab="${tabParam}"]`,
            );
            if (tabButton) {
              tabButton.click();
            }
          }
        } catch (error) {
          console.error("‚ùå Erro ao atualizar p√°gina:", error);
          mostrarErroGlobal("Erro ao atualizar a p√°gina", error);
        } finally {
          // Limpar timeout de seguran√ßa
          clearTimeout(safetyTimeout);

          // Esconder loading usando classe
          if (globalLoading) {
            globalLoading.className = "hide";
          }

          // ‚úÖ INICIALIZA√á√ÉO FINAL DOS √çCONES LUCIDE E FAVICON (com verifica√ß√µes robustas)
          setTimeout(() => {
            // Verificar se Lucide est√° dispon√≠vel
            if (typeof lucide !== 'undefined' && lucide.createIcons) {
              try {
                lucide.createIcons();
                console.log("üéØ √çcones Lucide inicializados globalmente");

                // Verifica√ß√£o adicional: contar √≠cones criados
                const icones = document.querySelectorAll('[data-lucide]');
                console.log(`‚úÖ ${icones.length} √≠cones Lucide encontrados na p√°gina`);
              } catch (error) {
                console.warn("‚ö†Ô∏è Erro ao inicializar Lucide:", error);
              }
            } else {
              console.warn("‚ö†Ô∏è Lucide n√£o est√° dispon√≠vel");
            }

            // Garantir favicon (verifica√ß√£o adicional)
            if (!document.querySelector('link[rel="icon"]')) {
              try {
                const favicon = document.createElement('link');
                favicon.rel = 'icon';
                favicon.type = 'image/png';
                favicon.href = '/favicon.png';
                document.head.appendChild(favicon);
                console.log("üéØ Favicon adicionado automaticamente");
              } catch (error) {
                console.warn("‚ö†Ô∏è Erro ao adicionar favicon:", error);
              }
            }

            // ‚úÖ VERIFICA√á√ÉO FINAL DE INTERFACE
            const finalMainScreen = document.getElementById('main-screen');
            const finalSecondaryScreen = document.getElementById('secondary-screen');
            const finalModulesGrid = document.querySelector('.modules-grid');

            console.log("üîç Verifica√ß√£o final da interface:");
            console.log("  main-screen:", !!finalMainScreen, finalMainScreen?.style.display !== 'none' ? 'vis√≠vel' : 'oculto');
            console.log("  secondary-screen:", !!finalSecondaryScreen, finalSecondaryScreen?.style.display !== 'none' ? 'vis√≠vel' : 'oculto');
            console.log("  modules-grid:", !!finalModulesGrid);

            if (finalMainScreen && finalModulesGrid) {
              console.log("‚úÖ Interface principal pronta e funcional");
            } else {
              console.error("‚ùå CR√çTICO: Interface principal com problemas");
            }
          }, 300);

          console.log("üéâ Navega√ß√£o Hier√°rquica inicializada com corre√ß√µes de seguran√ßa!");
          console.log("üì± Use tecla ESC para voltar √† tela principal");
          console.log("üõ°Ô∏è Verifica√ß√µes de elementos DOM implementadas");
          console.log("üö´ Nenhum m√≥dulo ser√° pr√©-selecionado automaticamente");
        }
      });
    </script>
  </body>
</html>