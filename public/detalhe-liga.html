<!doctype html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Detalhe da Liga - Super Cartola Manager</title>

        <!-- Suprimir warnings de extens√µes do navegador -->
        <script>
            // Capturar erros de extens√µes que n√£o afetam o sistema
            window.addEventListener('unhandledrejection', function(event) {
              if (event.reason && event.reason.message && 
                  event.reason.message.includes('message channel closed')) {
                event.preventDefault(); // Silenciar este erro espec√≠fico
              }
            });
        </script>
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />

        <!-- CSS HIER√ÅRQUICO MODULAR -->
        <link rel="stylesheet" href="style.css" />
        <link rel="stylesheet" href="detalhe-liga.css" />
        <link rel="stylesheet" href="css/base.css" />
        <link rel="stylesheet" href="css/performance.css" />

        <!-- EXTERNAL DEPENDENCIES -->
        <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />

        <!-- CORRE√á√ÉO CR√çTICA: Definir fun√ß√µes globais no HEAD antes do carregamento -->
        <script>
            // === GERENCIAMENTO DA LOGO - DEFINIDO NO HEAD ===
            let logoTentativas = [
                "img/logo-supercartola.png",
                "../public/img/logo-supercartola.png",
                "./public/img/logo-supercartola.png",
                "/public/img/logo-supercartola.png",
                "public/img/logo-supercartola.png",
            ];
            let logoIndiceAtual = 0;

            function tentarProximoCaminho(img) {
                logoIndiceAtual++;
                if (logoIndiceAtual < logoTentativas.length) {
                    img.src = logoTentativas[logoIndiceAtual];
                } else {
                    // Todas as tentativas falharam, mostrar emoji
                    mostrarLogoFallback();
                }
            }

            function logoCarregada(img) {
                const fallback = document.getElementById("logoFallback");
                if (fallback) {
                    fallback.style.display = "none";
                }
                img.style.display = "block";
            }

            function mostrarLogoFallback() {
                const logoImage = document.getElementById("logoImage");
                const fallback = document.getElementById("logoFallback");
                if (logoImage) {
                    logoImage.style.display = "none";
                }
                if (fallback) {
                    fallback.style.display = "inline-block";
                }
            }

            // Fun√ß√£o goToDashboard para compatibilidade com layout
            function goToDashboard() {
                window.location.href = "dashboard.html";
            }
        </script>
    </head>

    <body>
        <div class="app-container">
            <div id="sidebar-placeholder"></div>

            <main class="app-main">
                <div class="page-content">
                    <!-- Header da Liga Simplificado -->
                    <div class="liga-header">
                        <h2 id="nomeLiga" class="liga-titulo">Nome da Liga</h2>
                        <p id="quantidadeTimes" class="liga-info">
                            0 participantes
                        </p>
                    </div>

                    <!-- Tela Principal - 11 Cards Independentes -->
                    <div id="main-screen" class="main-screen">
                        <div class="modules-grid modules-grid-expanded">
                            <!-- 1. Card Participantes -->
                            <div
                                class="module-card"
                                data-module="participantes"
                            >
                                <div class="module-header">
                                    <div class="module-icon">üë•</div>
                                    <h3 class="module-title">PARTICIPANTES</h3>
                                </div>
                                <div class="module-count" id="participantes-count">0 membros</div>
                            </div>

                            <!-- 2. Card Classifica√ß√£o Geral -->
                            <div
                                class="module-card"
                                data-module="ranking-geral"
                            >
                                <div class="module-header">
                                    <div class="module-icon">üèÜ</div>
                                    <h3 class="module-title">CLASSIFICA√á√ÉO</h3>
                                </div>
                            </div>

                            <!-- 3. Card Resultados Parciais -->
                            <div class="module-card" data-module="parciais">
                                <div class="module-header">
                                    <div class="module-icon">üìä</div>
                                    <h3 class="module-title">PARCIAIS</h3>
                                </div>
                            </div>

                            <!-- 4. Card Top 10 -->
                            <div class="module-card" data-module="top10">
                                <div class="module-header">
                                    <div class="module-icon">üåü</div>
                                    <h3 class="module-title">TOP 10</h3>
                                </div>
                            </div>

                            <!-- 5. Card Por Rodadas -->
                            <div class="module-card" data-module="rodadas">
                                <div class="module-header">
                                    <div class="module-icon">üìÖ</div>
                                    <h3 class="module-title">RODADAS</h3>
                                </div>
                            </div>

                            <!-- 6. Card Melhor M√™s -->
                            <div class="module-card" data-module="melhor-mes">
                                <div class="module-header">
                                    <div class="module-icon">üìà</div>
                                    <h3 class="module-title">MELHOR M√äS</h3>
                                </div>
                            </div>

                            <!-- 7. Card Mata-mata -->
                            <div class="module-card" data-module="mata-mata">
                                <div class="module-header">
                                    <div class="module-icon">‚öîÔ∏è</div>
                                    <h3 class="module-title">MATA-MATA</h3>
                                </div>
                            </div>

                            <!-- 8. Card Pontos Corridos -->
                            <div
                                class="module-card"
                                data-module="pontos-corridos"
                            >
                                <div class="module-header">
                                    <div class="module-icon">‚ö°</div>
                                    <h3 class="module-title">
                                        PONTOS CORRIDOS
                                    </h3>
                                </div>
                            </div>

                            <!-- 9. Card Luva de Ouro -->
                            <div class="module-card" data-module="luva-de-ouro">
                                <div class="module-header">
                                    <div class="module-icon">ü•Ö</div>
                                    <h3 class="module-title">LUVA DE OURO</h3>
                                </div>
                            </div>

                            <!-- 10. Card Artilheiro -->
                            <div
                                class="module-card"
                                data-module="artilheiro-campeao"
                            >
                                <div class="module-header">
                                    <div class="module-icon">‚öΩ</div>
                                    <h3 class="module-title">ARTILHEIRO</h3>
                                </div>
                            </div>

                            <!-- 11. Card Fluxo Financeiro -->
                            <div
                                class="module-card"
                                data-module="fluxo-financeiro"
                            >
                                <div class="module-header">
                                    <div class="module-icon">üí∞</div>
                                    <h3 class="module-title">FINANCEIRO</h3>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tela Secund√°ria - Conte√∫do Din√¢mico -->
                    <div id="secondary-screen" class="dynamic-content">
                        <div id="dynamic-content-area">
                            <!-- Conte√∫do ser√° injetado aqui dinamicamente -->
                        </div>
                    </div>
                </div>
            </main>

            <!-- Overlay de Loading -->
            <div id="processing-overlay" class="processing-overlay">
                <div class="spinner"></div>
                <div class="processing-text">Carregando dados...</div>
            </div>
        </div>

        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

        <!-- SCRIPTS MODULARES -->
        <script src="js/cards-condicionais.js"></script>
        <script src="js/sistema-modulos-init.js"></script>
        <script type="module" src="js/detalhe-liga-orquestrador.js"></script>

        <!-- M√ìDULOS JS EXISTENTES -->
        <script type="module" src="js/utils.js"></script>
        <script type="module" src="js/navigation.js"></script>
        <script src="js/seletor-ligas.js"></script>
    </body>
</html>