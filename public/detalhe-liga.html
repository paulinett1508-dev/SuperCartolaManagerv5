<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Liga - Super Cartola Manager</title>
    <link rel="icon" type="image/png" href="/favicon.png" />

    <!-- CSS REFATORADO -->
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="detalhe-liga.css" />

    <!-- DEPENDÃŠNCIAS EXTERNAS -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  </head>
  <body>
    <div class="app-container">
      <!-- SIDEBAR -->
      <aside class="app-sidebar">
        <div class="sidebar-logo">
          <div class="logo-container">
            <img src="/img/logo-supercartola.png" alt="Logo" class="logo-image" style="display: none;" onerror="this.style.display='none'; document.getElementById('logoFallback').style.display='flex';">
            <div id="logoFallback">âš½</div>
            <div class="logo-text">
              <h2>SUPER CARTOLA</h2>
              <p>Manager</p>
            </div>
          </div>
        </div>

        <nav class="sidebar-section">
          <h3>NavegaÃ§Ã£o</h3>
          <ul class="sidebar-menu">
            <li><a href="/dashboard.html"><span class="icon">ğŸ </span>Dashboard</a></li>
            <li><a href="/gerenciar.html"><span class="icon">âš™ï¸</span>Gerenciar</a></li>
            <li><a href="/criar.html"><span class="icon">â•</span>Criar Liga</a></li>
          </ul>
        </nav>

        <div class="sidebar-section">
          <h3>Minhas Ligas</h3>
          <div id="sidebar-ligas">
            <div class="ligas-loading">Carregando ligas...</div>
          </div>
        </div>
      </aside>

      <!-- CONTEÃšDO PRINCIPAL -->
      <main class="app-main">
        <header class="page-header">
          <button class="mobile-sidebar-toggle">â˜°</button>
          <div class="breadcrumb">
            <a href="/dashboard.html">Dashboard</a>
            <span class="separator">â€º</span>
            <span class="current">Liga</span>
          </div>
          <h1 class="page-title">Carregando Liga...</h1>
          <p class="page-subtitle">Aguarde...</p>
        </header>

        <div class="page-content">
          <!-- HEADER DA LIGA -->
          <div class="liga-header">
            <div class="liga-info">
              <img id="liga-escudo" src="/escudos/default.png" alt="Escudo da Liga" class="liga-escudo">
              <div class="liga-dados">
                <h1 id="liga-nome">Nome da Liga</h1>
                <div class="liga-meta">
                  <span><span class="icon">ğŸ‘¥</span><span id="liga-participantes">0</span> participantes</span>
                  <span><span class="icon">ğŸ¯</span>Rodada <span id="liga-rodada">1</span></span>
                  <span><span class="icon">ğŸ’°</span>Status: <span id="liga-status">Ativa</span></span>
                </div>
              </div>
            </div>

            <div class="liga-actions">
              <button class="action-btn" onclick="ExportSystem.show()">
                <span class="icon">ğŸ“¤</span>Exportar
              </button>
              <button class="action-btn" onclick="window.print()">
                <span class="icon">ğŸ–¨ï¸</span>Imprimir
              </button>
              <button class="action-btn" onclick="location.reload()">
                <span class="icon">ğŸ”„</span>Atualizar
              </button>
            </div>
          </div>

          <!-- SISTEMA DE TABS -->
          <div class="tabs-container">
            <div class="tabs-list">
              <button class="tab-button active" data-tab="ranking">
                <span class="icon">ğŸ†</span>Ranking
              </button>
              <button class="tab-button" data-tab="participantes">
                <span class="icon">ğŸ‘¥</span>Participantes
              </button>
              <button class="tab-button" data-tab="rodadas">
                <span class="icon">ğŸ¯</span>Rodadas
              </button>
              <button class="tab-button" data-tab="mata-mata">
                <span class="icon">âš”ï¸</span>Mata-Mata
              </button>
              <button class="tab-button" data-tab="pontos-corridos">
                <span class="icon">ğŸ“Š</span>Pontos Corridos
              </button>
              <button class="tab-button" data-tab="fluxo-financeiro">
                <span class="icon">ğŸ’°</span>Financeiro
              </button>
              <button class="tab-button" data-tab="artilheiro-campeao">
                <span class="icon">âš½</span>Artilheiro
              </button>
              <button class="tab-button" data-tab="melhor-mes">
                <span class="icon">ğŸŒŸ</span>Melhor MÃªs
              </button>
              <button class="tab-button" data-tab="luva-de-ouro">
                <span class="icon">ğŸ¥…</span>Luva de Ouro
              </button>
              <button class="tab-button" data-tab="top10">
                <span class="icon">ğŸ”¥</span>Top 10
              </button>
            </div>
          </div>

          <!-- CONTEÃšDO DAS TABS -->
          <div id="tab-ranking" class="tab-content active">
            <div class="liga-loading">Carregando ranking...</div>
          </div>

          <div id="tab-participantes" class="tab-content">
            <div class="liga-loading">Carregando participantes...</div>
          </div>

          <div id="tab-rodadas" class="tab-content">
            <div class="liga-loading">Carregando rodadas...</div>
          </div>

          <div id="tab-mata-mata" class="tab-content">
            <div class="liga-loading">Carregando mata-mata...</div>
          </div>

          <div id="tab-pontos-corridos" class="tab-content">
            <div class="liga-loading">Carregando pontos corridos...</div>
          </div>

          <div id="tab-fluxo-financeiro" class="tab-content">
            <div class="liga-loading">Carregando fluxo financeiro...</div>
          </div>

          <div id="tab-artilheiro-campeao" class="tab-content">
            <div class="liga-loading">Carregando artilheiro campeÃ£o...</div>
          </div>

          <div id="tab-melhor-mes" class="tab-content">
            <div class="liga-loading">Carregando melhor do mÃªs...</div>
          </div>

          <div id="tab-luva-de-ouro" class="tab-content">
            <div class="liga-loading">Carregando luva de ouro...</div>
          </div>

          <div id="tab-top10" class="tab-content">
            <div class="liga-loading">Carregando top 10...</div>
          </div>
        </div>
      </main>
    </div>

    <!-- SCRIPTS DOS MÃ“DULOS EXISTENTES -->
    <script src="/js/utils.js"></script>
    <script src="/js/layout-system.js"></script>
    <script src="/js/navigation.js"></script>
    <script src="/js/seletor-ligas.js"></script>

    <!-- MÃ“DULOS ESPECÃFICOS -->
    <script src="/js/participantes.js"></script>
    <script src="/js/rodadas.js"></script>
    <script src="/js/mata-mata.js"></script>
    <script src="/js/ranking.js"></script>
    <script src="/js/pontos-corridos.js"></script>
    <script src="/js/fluxo-financeiro.js"></script>
    <script src="/js/artilheiro-campeao.js"></script>
    <script src="/js/melhor-mes.js"></script>
    <script src="/js/luva-de-ouro.js"></script>
    <script src="/js/top10.js"></script>

    <!-- JAVASCRIPT REFATORADO PRINCIPAL -->
    <script type="module" src="detalhe-liga.js"></script>

    <script>
      // ğŸ”„ MOBILE SIDEBAR TOGGLE
      document.addEventListener('DOMContentLoaded', function() {
        const toggle = document.querySelector('.mobile-sidebar-toggle');
        const sidebar = document.querySelector('.app-sidebar');

        if (toggle && sidebar) {
          toggle.addEventListener('click', function() {
            sidebar.classList.toggle('mobile-open');
          });

          // Fechar ao clicar fora
          document.addEventListener('click', function(e) {
            if (!sidebar.contains(e.target) && !toggle.contains(e.target)) {
              sidebar.classList.remove('mobile-open');
            }
          });
        }
      });
    </script>
  </body>
</html>